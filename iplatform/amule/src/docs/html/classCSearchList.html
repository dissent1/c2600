<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>aMule: CSearchList Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>CSearchList Class Reference</h1><!-- doxytag: class="CSearchList" -->
<p><a href="classCSearchList-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCSearchList_1_1CSearchParams.html">CSearchParams</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Structure used to pass search-parameters.  <a href="structCSearchList_1_1CSearchParams.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#ae6aef234c7b855c7c3cac3a51c1f1942">CSearchList</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#adbb1f58c09eed601d1b7684b541f78ba">~CSearchList</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">wxString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a4bfffa3fc0ebb8b29b4b162600973cfc">StartNewSearch</a> (uint32 *searchID, SearchType type, const <a class="el" href="structCSearchList_1_1CSearchParams.html">CSearchParams</a> &amp;params)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a508b1d1a72d74c337bff6150c2f09b97">StopSearch</a> (bool globalOnly=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#aa57ad724b3c507071928b1854df3f3c2">GetSearchProgress</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#af8aec4e1da67cf5bcd2b67060c9b4192">LocalSearchEnd</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const CSearchResultList &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a3840c7c90d9f0a35b70e63ed0f0e6dcc">GetSearchResults</a> (long searchID) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a91d81d209467d2ac3082f0b2c0133188">RemoveResults</a> (long searchID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a0184f152c0b0cfc023bf77bd76764fb6">AddFileToDownloadByHash</a> (const <a class="el" href="classCMD4Hash.html">CMD4Hash</a> &amp;hash, uint8 category=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#ad8cfc4ba3bce4983d61b86d7f3a7cc6e">ProcessSharedFileList</a> (const byte *packet, uint32 size, <a class="el" href="classCUpDownClient.html">CUpDownClient</a> *sender, bool *moreResultsAvailable, const wxString &amp;directory)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a3015a7186fe86637c13b832ee21283a6">ProcessSearchAnswer</a> (const uint8_t *packet, uint32_t size, bool optUTF8, uint32_t serverIP, uint16_t serverPort)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#ac2bc4a312977953d29708ef32d6541f5">ProcessUDPSearchAnswer</a> (const <a class="el" href="classCMemFile.html">CMemFile</a> &amp;packet, bool optUTF8, uint32 serverIP, uint16 serverPort)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#ae846f14c06247a95a098055414883cf4">KademliaSearchKeyword</a> (uint32_t searchID, const <a class="el" href="classKademlia_1_1CUInt128.html">Kademlia::CUInt128</a> *fileID, const wxString &amp;name, uint64_t size, const wxString &amp;type, uint32_t kadPublishInfo, const TagPtrList &amp;taglist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aba9ecd267b5429ee865db85c4c6aec83"></a><!-- doxytag: member="CSearchList::UpdateSearchFileByHash" ref="aba9ecd267b5429ee865db85c4c6aec83" args="(const CMD4Hash &amp;hash)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#aba9ecd267b5429ee865db85c4c6aec83">UpdateSearchFileByHash</a> (const <a class="el" href="classCMD4Hash.html">CMD4Hash</a> &amp;hash)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aef815a16a205f6e949c89a89a198caaa"></a><!-- doxytag: member="CSearchList::SetKadSearchFinished" ref="aef815a16a205f6e949c89a89a198caaa" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#aef815a16a205f6e949c89a89a198caaa">SetKadSearchFinished</a> ()</td></tr>
<tr><td colspan="2"><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a510278b86bc23b2dda72cdb2f211276f"></a><!-- doxytag: member="CSearchList::CMemFilePtr" ref="a510278b86bc23b2dda72cdb2f211276f" args="" -->
typedef std::auto_ptr&lt; <a class="el" href="classCMemFile.html">CMemFile</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a510278b86bc23b2dda72cdb2f211276f">CMemFilePtr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a401a395503a99dfe42df5aedbb4f98cf"></a><!-- doxytag: member="CSearchList::ResultMap" ref="a401a395503a99dfe42df5aedbb4f98cf" args="" -->
typedef std::map&lt; long, <br class="typebreak"/>
CSearchResultList &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a401a395503a99dfe42df5aedbb4f98cf">ResultMap</a></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a211326108f7dc53f84d9736a1b083ecd">OnGlobalSearchTimer</a> (<a class="el" href="classCTimerEvent.html">CTimerEvent</a> &amp;evt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a93f14a2ea7a5f13bc33817b14fd4bbe2">AddToList</a> (<a class="el" href="classCSearchFile.html">CSearchFile</a> *toadd, bool clientResponse=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCSearchList.html#a510278b86bc23b2dda72cdb2f211276f">CMemFilePtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#ab8c7071d5cce7b90221f89c4d572d4f9">CreateSearchData</a> (const <a class="el" href="structCSearchList_1_1CSearchParams.html">CSearchParams</a> &amp;params, SearchType type, bool supports64bit, bool &amp;packetUsing64bit)</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae8bf477b82f322ace6f7e686773c3112"></a><!-- doxytag: member="CSearchList::m_searchTimer" ref="ae8bf477b82f322ace6f7e686773c3112" args="" -->
<a class="el" href="classCTimer.html">CTimer</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#ae8bf477b82f322ace6f7e686773c3112">m_searchTimer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a757397e3132df26199b12c250647922b"></a><!-- doxytag: member="CSearchList::m_searchType" ref="a757397e3132df26199b12c250647922b" args="" -->
SearchType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a757397e3132df26199b12c250647922b">m_searchType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a055874b561d93aeb926fc330fb04659d"></a><!-- doxytag: member="CSearchList::m_searchInProgress" ref="a055874b561d93aeb926fc330fb04659d" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a055874b561d93aeb926fc330fb04659d">m_searchInProgress</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3d98906c4de57ed8f67ef97e5221bee4"></a><!-- doxytag: member="CSearchList::m_currentSearch" ref="a3d98906c4de57ed8f67ef97e5221bee4" args="" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a3d98906c4de57ed8f67ef97e5221bee4">m_currentSearch</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6a10338ebb32c610bf4fff66a7c0a0ae"></a><!-- doxytag: member="CSearchList::m_searchPacket" ref="a6a10338ebb32c610bf4fff66a7c0a0ae" args="" -->
<a class="el" href="classCPacket.html">CPacket</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a6a10338ebb32c610bf4fff66a7c0a0ae">m_searchPacket</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a252f135f097d52b1155c8f776015b826"></a><!-- doxytag: member="CSearchList::m_64bitSearchPacket" ref="a252f135f097d52b1155c8f776015b826" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a252f135f097d52b1155c8f776015b826">m_64bitSearchPacket</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3bf8536c20632e0abb8d28787316b39b"></a><!-- doxytag: member="CSearchList::m_KadSearchFinished" ref="a3bf8536c20632e0abb8d28787316b39b" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a3bf8536c20632e0abb8d28787316b39b">m_KadSearchFinished</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCQueueObserver.html">CQueueObserver</a>&lt; <a class="el" href="classCServer.html">CServer</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#a201ded6fe7f4a612e86c8070667e2d15">m_serverQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af58dcdb05f46f2501375df218dfd7651"></a><!-- doxytag: member="CSearchList::m_results" ref="af58dcdb05f46f2501375df218dfd7651" args="" -->
<a class="el" href="classCSearchList.html#a401a395503a99dfe42df5aedbb4f98cf">ResultMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#af58dcdb05f46f2501375df218dfd7651">m_results</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">wxString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCSearchList.html#ae1ce5321a4d68fbdd4edb2f339853a9f">m_resultType</a></td></tr>
</table>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae6aef234c7b855c7c3cac3a51c1f1942"></a><!-- doxytag: member="CSearchList::CSearchList" ref="ae6aef234c7b855c7c3cac3a51c1f1942" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSearchList::CSearchList </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>

</div>
</div>
<a class="anchor" id="adbb1f58c09eed601d1b7684b541f78ba"></a><!-- doxytag: member="CSearchList::~CSearchList" ref="adbb1f58c09eed601d1b7684b541f78ba" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSearchList::~CSearchList </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Frees any remaining search-results. </p>

<p>References <a class="el" href="SearchList_8h_source.html#l00224">m_results</a>, <a class="el" href="SearchList_8cpp_source.html#l00270">RemoveResults()</a>, and <a class="el" href="SearchList_8cpp_source.html#l00617">StopSearch()</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a0184f152c0b0cfc023bf77bd76764fb6"></a><!-- doxytag: member="CSearchList::AddFileToDownloadByHash" ref="a0184f152c0b0cfc023bf77bd76764fb6" args="(const CMD4Hash &amp;hash, uint8 category=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSearchList::AddFileToDownloadByHash </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCMD4Hash.html">CMD4Hash</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8&nbsp;</td>
          <td class="paramname"> <em>category</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finds the search-result (by hash) and downloads it in the given category. </p>

<p>References <a class="el" href="SearchList_8h_source.html#l00224">m_results</a>.</p>

</div>
</div>
<a class="anchor" id="a93f14a2ea7a5f13bc33817b14fd4bbe2"></a><!-- doxytag: member="CSearchList::AddToList" ref="a93f14a2ea7a5f13bc33817b14fd4bbe2" args="(CSearchFile *toadd, bool clientResponse=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CSearchList::AddToList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCSearchFile.html">CSearchFile</a> *&nbsp;</td>
          <td class="paramname"> <em>toadd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>clientResponse</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds the specified file to the current search's results. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>toadd</em>&nbsp;</td><td>The result to add. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clientResponse</em>&nbsp;</td><td>Is the result sent by a client (shared-files list). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if the results were added, false otherwise.</dd></dl>
<p>Note that this function takes ownership of the <a class="el" href="classCSearchFile.html" title="Represents a search-result returned from a server or client.">CSearchFile</a> object, regardless of whenever or not it was actually added to the results list. </p>

<p>References <a class="el" href="amule-remote-gui_8cpp_source.html#l01996">CSearchFile::AddChild()</a>, <a class="el" href="SearchFile_8h_source.html#l00106">CSearchFile::GetSearchID()</a>, <a class="el" href="SearchList_8h_source.html#l00224">m_results</a>, and <a class="el" href="SearchList_8h_source.html#l00228">m_resultType</a>.</p>

<p>Referenced by <a class="el" href="SearchList_8cpp_source.html#l00967">KademliaSearchKeyword()</a>, <a class="el" href="SearchList_8cpp_source.html#l00514">ProcessSearchAnswer()</a>, <a class="el" href="SearchList_8cpp_source.html#l00473">ProcessSharedFileList()</a>, and <a class="el" href="SearchList_8cpp_source.html#l00525">ProcessUDPSearchAnswer()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8c7071d5cce7b90221f89c4d572d4f9"></a><!-- doxytag: member="CSearchList::CreateSearchData" ref="ab8c7071d5cce7b90221f89c4d572d4f9" args="(const CSearchParams &amp;params, SearchType type, bool supports64bit, bool &amp;packetUsing64bit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCSearchList.html#a510278b86bc23b2dda72cdb2f211276f">CSearchList::CMemFilePtr</a> CSearchList::CreateSearchData </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structCSearchList_1_1CSearchParams.html">CSearchParams</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SearchType&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>supports64bit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&nbsp;</td>
          <td class="paramname"> <em>packetUsing64bit</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a basic search-packet for the given search-type. </p>

<p>References <a class="el" href="SearchList_8h_source.html#l00076">CSearchList::CSearchParams::availability</a>, <a class="el" href="SearchList_8h_source.html#l00070">CSearchList::CSearchParams::extension</a>, <a class="el" href="SearchList_8h_source.html#l00074">CSearchList::CSearchParams::maxSize</a>, <a class="el" href="SearchList_8h_source.html#l00072">CSearchList::CSearchParams::minSize</a>, <a class="el" href="SearchList_8h_source.html#l00066">CSearchList::CSearchParams::searchString</a>, and <a class="el" href="SearchList_8h_source.html#l00068">CSearchList::CSearchParams::typeText</a>.</p>

<p>Referenced by <a class="el" href="SearchList_8cpp_source.html#l00288">StartNewSearch()</a>.</p>

</div>
</div>
<a class="anchor" id="aa57ad724b3c507071928b1854df3f3c2"></a><!-- doxytag: member="CSearchList::GetSearchProgress" ref="aa57ad724b3c507071928b1854df3f3c2" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 CSearchList::GetSearchProgress </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the completion percentage of the current search. </p>

<p>References <a class="el" href="ObservableQueue_8h_source.html#l00402">CQueueObserver&lt; ValueType &gt;::GetRemaining()</a>, <a class="el" href="SearchList_8h_source.html#l00214">m_KadSearchFinished</a>, <a class="el" href="SearchList_8h_source.html#l00202">m_searchInProgress</a>, <a class="el" href="SearchList_8h_source.html#l00199">m_searchType</a>, and <a class="el" href="SearchList_8h_source.html#l00218">m_serverQueue</a>.</p>

<p>Referenced by <a class="el" href="SearchList_8cpp_source.html#l00409">OnGlobalSearchTimer()</a>.</p>

</div>
</div>
<a class="anchor" id="a3840c7c90d9f0a35b70e63ed0f0e6dcc"></a><!-- doxytag: member="CSearchList::GetSearchResults" ref="a3840c7c90d9f0a35b70e63ed0f0e6dcc" args="(long searchID) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const CSearchResultList &amp; CSearchList::GetSearchResults </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>searchID</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the list of results for the specified search. </p>
<p>If the search is not valid, an empty list is returned. </p>

<p>References <a class="el" href="SearchList_8h_source.html#l00224">m_results</a>.</p>

</div>
</div>
<a class="anchor" id="ae846f14c06247a95a098055414883cf4"></a><!-- doxytag: member="CSearchList::KademliaSearchKeyword" ref="ae846f14c06247a95a098055414883cf4" args="(uint32_t searchID, const Kademlia::CUInt128 *fileID, const wxString &amp;name, uint64_t size, const wxString &amp;type, uint32_t kadPublishInfo, const TagPtrList &amp;taglist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSearchList::KademliaSearchKeyword </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>searchID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classKademlia_1_1CUInt128.html">Kademlia::CUInt128</a> *&nbsp;</td>
          <td class="paramname"> <em>fileID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wxString &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wxString &amp;&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>kadPublishInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TagPtrList &amp;&nbsp;</td>
          <td class="paramname"> <em>taglist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a result in the form of a kad search-keyword to the specified result-list. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>searchID</em>&nbsp;</td><td>The search to which this result belongs. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fileID</em>&nbsp;</td><td>The hash of the result-file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>The filename of the result. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>The filesize of the result. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>The filetype of the result (TODO: Not used?) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>kadPublishInfo</em>&nbsp;</td><td>The kademlia publish information of the result. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>taglist</em>&nbsp;</td><td>List of additional tags associated with the search-result. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="SearchList_8cpp_source.html#l00531">AddToList()</a>, <a class="el" href="MemFile_8cpp_source.html#l00075">CMemFile::GetPosition()</a>, and <a class="el" href="SafeFile_8cpp_source.html#l00100">CFileDataIO::Seek()</a>.</p>

</div>
</div>
<a class="anchor" id="af8aec4e1da67cf5bcd2b67060c9b4192"></a><!-- doxytag: member="CSearchList::LocalSearchEnd" ref="af8aec4e1da67cf5bcd2b67060c9b4192" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSearchList::LocalSearchEnd </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function is called once the local (ed2k) search has ended. </p>

<p>References <a class="el" href="SearchList_8h_source.html#l00202">m_searchInProgress</a>, <a class="el" href="SearchList_8h_source.html#l00208">m_searchPacket</a>, <a class="el" href="SearchList_8h_source.html#l00196">m_searchTimer</a>, <a class="el" href="SearchList_8h_source.html#l00199">m_searchType</a>, <a class="el" href="SearchList_8h_source.html#l00218">m_serverQueue</a>, and <a class="el" href="Timer_8cpp_source.html#l00110">CTimer::Start()</a>.</p>

</div>
</div>
<a class="anchor" id="a211326108f7dc53f84d9736a1b083ecd"></a><!-- doxytag: member="CSearchList::OnGlobalSearchTimer" ref="a211326108f7dc53f84d9736a1b083ecd" args="(CTimerEvent &amp;evt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSearchList::OnGlobalSearchTimer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCTimerEvent.html">CTimerEvent</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>evt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Event-handler for global searches. </p>

<p>References <a class="el" href="MemFile_8cpp_source.html#l00097">CMemFile::GetLength()</a>, <a class="el" href="ObservableQueue_8h_source.html#l00386">CQueueObserver&lt; ValueType &gt;::GetNext()</a>, <a class="el" href="ObservableQueue_8h_source.html#l00402">CQueueObserver&lt; ValueType &gt;::GetRemaining()</a>, <a class="el" href="SearchList_8cpp_source.html#l00382">GetSearchProgress()</a>, <a class="el" href="ObservableQueue_8h_source.html#l00411">CQueueObserver&lt; ValueType &gt;::IsActive()</a>, <a class="el" href="SearchList_8h_source.html#l00211">m_64bitSearchPacket</a>, <a class="el" href="SearchList_8h_source.html#l00208">m_searchPacket</a>, <a class="el" href="SearchList_8h_source.html#l00218">m_serverQueue</a>, and <a class="el" href="SearchList_8cpp_source.html#l00617">StopSearch()</a>.</p>

</div>
</div>
<a class="anchor" id="a3015a7186fe86637c13b832ee21283a6"></a><!-- doxytag: member="CSearchList::ProcessSearchAnswer" ref="a3015a7186fe86637c13b832ee21283a6" args="(const uint8_t *packet, uint32_t size, bool optUTF8, uint32_t serverIP, uint16_t serverPort)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSearchList::ProcessSearchAnswer </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>optUTF8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>serverIP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>serverPort</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes a search-result sent via TCP from the local server. </p>
<p>All results are added.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>The packet containing one or more search-results. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>the length of the packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>optUTF8</em>&nbsp;</td><td>Specifies if the server supports UTF8. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>serverIP</em>&nbsp;</td><td>The IP of the server sending the results. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>serverPort</em>&nbsp;</td><td>The Port of the server sending the results. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="SearchList_8cpp_source.html#l00531">AddToList()</a>, and <a class="el" href="SearchList_8h_source.html#l00205">m_currentSearch</a>.</p>

</div>
</div>
<a class="anchor" id="ad8cfc4ba3bce4983d61b86d7f3a7cc6e"></a><!-- doxytag: member="CSearchList::ProcessSharedFileList" ref="ad8cfc4ba3bce4983d61b86d7f3a7cc6e" args="(const byte *packet, uint32 size, CUpDownClient *sender, bool *moreResultsAvailable, const wxString &amp;directory)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSearchList::ProcessSharedFileList </td>
          <td>(</td>
          <td class="paramtype">const byte *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCUpDownClient.html">CUpDownClient</a> *&nbsp;</td>
          <td class="paramname"> <em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&nbsp;</td>
          <td class="paramname"> <em>moreResultsAvailable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wxString &amp;&nbsp;</td>
          <td class="paramname"> <em>directory</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes a list of shared files from a client. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>The raw packet received from the client. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>the length of the packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sender</em>&nbsp;</td><td>The sender of the packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>moreResultsAvailable</em>&nbsp;</td><td>Set to a value specifying if more results are available. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>directory</em>&nbsp;</td><td>The directory containing the shared files. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="SearchList_8cpp_source.html#l00531">AddToList()</a>, <a class="el" href="MemFile_8cpp_source.html#l00097">CMemFile::GetLength()</a>, <a class="el" href="MemFile_8cpp_source.html#l00075">CMemFile::GetPosition()</a>, and <a class="el" href="SafeFile_8cpp_source.html#l00130">CFileDataIO::ReadUInt8()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2bc4a312977953d29708ef32d6541f5"></a><!-- doxytag: member="CSearchList::ProcessUDPSearchAnswer" ref="ac2bc4a312977953d29708ef32d6541f5" args="(const CMemFile &amp;packet, bool optUTF8, uint32 serverIP, uint16 serverPort)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSearchList::ProcessUDPSearchAnswer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCMemFile.html">CMemFile</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>optUTF8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>serverIP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&nbsp;</td>
          <td class="paramname"> <em>serverPort</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes a search-result sent via UDP. </p>
<p>Only one result is read from the packet.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>The packet containing one or more search-results. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>optUTF8</em>&nbsp;</td><td>Specifies if the server supports UTF8. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>serverIP</em>&nbsp;</td><td>The IP of the server sending the results. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>serverPort</em>&nbsp;</td><td>The Port of the server sending the results. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="SearchList_8cpp_source.html#l00531">AddToList()</a>, and <a class="el" href="SearchList_8h_source.html#l00205">m_currentSearch</a>.</p>

</div>
</div>
<a class="anchor" id="a91d81d209467d2ac3082f0b2c0133188"></a><!-- doxytag: member="CSearchList::RemoveResults" ref="a91d81d209467d2ac3082f0b2c0133188" args="(long searchID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSearchList::RemoveResults </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>searchID</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes all results for the specified search. </p>

<p>References <a class="el" href="SearchList_8h_source.html#l00224">m_results</a>, and <a class="el" href="SearchList_8cpp_source.html#l00617">StopSearch()</a>.</p>

<p>Referenced by <a class="el" href="SearchList_8cpp_source.html#l00260">~CSearchList()</a>.</p>

</div>
</div>
<a class="anchor" id="a4bfffa3fc0ebb8b29b4b162600973cfc"></a><!-- doxytag: member="CSearchList::StartNewSearch" ref="a4bfffa3fc0ebb8b29b4b162600973cfc" args="(uint32 *searchID, SearchType type, const CSearchParams &amp;params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxString CSearchList::StartNewSearch </td>
          <td>(</td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>searchID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SearchType&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structCSearchList_1_1CSearchParams.html">CSearchParams</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts a new search. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>searchID</em>&nbsp;</td><td>The ID of the search, which may be modified. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>The type of search, see SearchType. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>params</em>&nbsp;</td><td>The search parameters, see <a class="el" href="structCSearchList_1_1CSearchParams.html" title="Structure used to pass search-parameters.">CSearchParams</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An empty string on success, otherwise an error-message. </dd></dl>

<p>References <a class="el" href="SearchList_8cpp_source.html#l00638">CreateSearchData()</a>, <a class="el" href="SearchList_8h_source.html#l00211">m_64bitSearchPacket</a>, <a class="el" href="SearchList_8h_source.html#l00205">m_currentSearch</a>, <a class="el" href="SearchList_8h_source.html#l00214">m_KadSearchFinished</a>, <a class="el" href="SearchList_8h_source.html#l00228">m_resultType</a>, <a class="el" href="SearchList_8h_source.html#l00202">m_searchInProgress</a>, <a class="el" href="SearchList_8h_source.html#l00208">m_searchPacket</a>, <a class="el" href="SearchList_8h_source.html#l00199">m_searchType</a>, <a class="el" href="SearchList_8h_source.html#l00066">CSearchList::CSearchParams::searchString</a>, <a class="el" href="SearchList_8cpp_source.html#l00617">StopSearch()</a>, and <a class="el" href="SearchList_8h_source.html#l00068">CSearchList::CSearchParams::typeText</a>.</p>

</div>
</div>
<a class="anchor" id="a508b1d1a72d74c337bff6150c2f09b97"></a><!-- doxytag: member="CSearchList::StopSearch" ref="a508b1d1a72d74c337bff6150c2f09b97" args="(bool globalOnly=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSearchList::StopSearch </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>globalOnly</em> = <code>false</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops the current search (global or Kad), if any is in progress. </p>

<p>References <a class="el" href="SearchList_8h_source.html#l00205">m_currentSearch</a>, <a class="el" href="SearchList_8h_source.html#l00202">m_searchInProgress</a>, <a class="el" href="SearchList_8h_source.html#l00208">m_searchPacket</a>, <a class="el" href="SearchList_8h_source.html#l00196">m_searchTimer</a>, <a class="el" href="SearchList_8h_source.html#l00199">m_searchType</a>, and <a class="el" href="Timer_8cpp_source.html#l00139">CTimer::Stop()</a>.</p>

<p>Referenced by <a class="el" href="SearchList_8cpp_source.html#l00409">OnGlobalSearchTimer()</a>, <a class="el" href="SearchList_8cpp_source.html#l00270">RemoveResults()</a>, <a class="el" href="SearchList_8cpp_source.html#l00288">StartNewSearch()</a>, and <a class="el" href="SearchList_8cpp_source.html#l00260">~CSearchList()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ae1ce5321a4d68fbdd4edb2f339853a9f"></a><!-- doxytag: member="CSearchList::m_resultType" ref="ae1ce5321a4d68fbdd4edb2f339853a9f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxString <a class="el" href="classCSearchList.html#ae1ce5321a4d68fbdd4edb2f339853a9f">CSearchList::m_resultType</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Contains the results type desired in the current search. </p>
<p>If not empty, results of different types are filtered. </p>

<p>Referenced by <a class="el" href="SearchList_8cpp_source.html#l00531">AddToList()</a>, and <a class="el" href="SearchList_8cpp_source.html#l00288">StartNewSearch()</a>.</p>

</div>
</div>
<a class="anchor" id="a201ded6fe7f4a612e86c8070667e2d15"></a><!-- doxytag: member="CSearchList::m_serverQueue" ref="a201ded6fe7f4a612e86c8070667e2d15" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCQueueObserver.html">CQueueObserver</a>&lt;<a class="el" href="classCServer.html">CServer</a>*&gt; <a class="el" href="classCSearchList.html#a201ded6fe7f4a612e86c8070667e2d15">CSearchList::m_serverQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Queue of servers to ask when doing global searches. </p>
<p>TODO: Replace with 'cookie' system. </p>

<p>Referenced by <a class="el" href="SearchList_8cpp_source.html#l00382">GetSearchProgress()</a>, <a class="el" href="SearchList_8cpp_source.html#l00367">LocalSearchEnd()</a>, and <a class="el" href="SearchList_8cpp_source.html#l00409">OnGlobalSearchTimer()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="SearchList_8h_source.html">SearchList.h</a></li>
<li>src/SearchList.cpp</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 4 Dec 2014 for aMule by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
