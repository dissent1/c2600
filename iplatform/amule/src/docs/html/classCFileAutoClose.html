<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>aMule: CFileAutoClose Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>CFileAutoClose Class Reference</h1><!-- doxytag: class="CFileAutoClose" -->
<p>This class encapsulates the <a class="el" href="classCFile.html" title="This class is a modified version of the wxFile class.">CFile</a> class.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="FileAutoClose_8h_source.html">FileAutoClose.h</a>&gt;</code></p>

<p><a href="classCFileAutoClose-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d7ef056268e34278641fc47808b6819"></a><!-- doxytag: member="CFileAutoClose::CFileAutoClose" ref="a6d7ef056268e34278641fc47808b6819" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a6d7ef056268e34278641fc47808b6819">CFileAutoClose</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#ab8d4baf5923d3af54eda87a629972e30">CFileAutoClose</a> (const <a class="el" href="classCPath.html">CPath</a> &amp;path, <a class="el" href="classCFile.html#ae3d32843d7aec03b3ff5f73c57254010">CFile::OpenMode</a> mode=CFile::read)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#ad637900755ff47326023f1053e8550ba">Release</a> (bool now=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a63184609fc4759f33d9330dcb8515f1a">Open</a> (const <a class="el" href="classCPath.html">CPath</a> &amp;path, <a class="el" href="classCFile.html#ae3d32843d7aec03b3ff5f73c57254010">CFile::OpenMode</a> mode=CFile::read)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#ae890bf901d0eaea4264d9b9c139e6df5">Create</a> (const <a class="el" href="classCPath.html">CPath</a> &amp;path, bool overwrite=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#ae361e443fe6e4421eec7793cb6c87409">Close</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a3e67f15471439c5e3247e39305b85069">GetLength</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a44cf917d6220c5f9c7298f80d687c368"></a><!-- doxytag: member="CFileAutoClose::SetLength" ref="a44cf917d6220c5f9c7298f80d687c368" args="(uint64 newLength)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a44cf917d6220c5f9c7298f80d687c368">SetLength</a> (uint64 newLength)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aca9216dc7cd06c99b2d1b3a9a34d7f44"></a><!-- doxytag: member="CFileAutoClose::GetFilePath" ref="aca9216dc7cd06c99b2d1b3a9a34d7f44" args="() const " -->
const <a class="el" href="classCPath.html">CPath</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#aca9216dc7cd06c99b2d1b3a9a34d7f44">GetFilePath</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3f9be385ed8d2c347dd982d98948cfbe"></a><!-- doxytag: member="CFileAutoClose::IsOpened" ref="a3f9be385ed8d2c347dd982d98948cfbe" args="() const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a3f9be385ed8d2c347dd982d98948cfbe">IsOpened</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a8679220d4eb55f60fef2f9ee9e5c946c">ReadAt</a> (void *buffer, uint64 offset, size_t count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a077ff3037a44ae331816ced403628424">WriteAt</a> (const void *buffer, uint64 offset, size_t count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2e569ec8e2e847c6af79c5bf5fada3b5"></a><!-- doxytag: member="CFileAutoClose::Eof" ref="a2e569ec8e2e847c6af79c5bf5fada3b5" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a2e569ec8e2e847c6af79c5bf5fada3b5">Eof</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a7352d831378cc648df0ae2b0456e31a5">fd</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa585edf2195a8a3bd620d095bb2813d4"></a><!-- doxytag: member="CFileAutoClose::Unlock" ref="aa585edf2195a8a3bd620d095bb2813d4" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#aa585edf2195a8a3bd620d095bb2813d4">Unlock</a> ()</td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa71d0d5ffe4da7f411e751a58fd17dd5"></a><!-- doxytag: member="CFileAutoClose::Reopen" ref="aa71d0d5ffe4da7f411e751a58fd17dd5" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#aa71d0d5ffe4da7f411e751a58fd17dd5">Reopen</a> ()</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe173d1aec0dded8c939d4f24ee40e33"></a><!-- doxytag: member="CFileAutoClose::CFileAutoClose" ref="afe173d1aec0dded8c939d4f24ee40e33" args="(const CFileAutoClose &amp;)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#afe173d1aec0dded8c939d4f24ee40e33">CFileAutoClose</a> (const <a class="el" href="classCFileAutoClose.html">CFileAutoClose</a> &amp;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a556de78ef7985cecd9d30ffb0d9d4bb3"></a><!-- doxytag: member="CFileAutoClose::operator=" ref="a556de78ef7985cecd9d30ffb0d9d4bb3" args="(const CFileAutoClose &amp;)" -->
<a class="el" href="classCFileAutoClose.html">CFileAutoClose</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classCFileAutoClose.html">CFileAutoClose</a> &amp;)</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0da5e36e648de49a47dd77843c52bcb9"></a><!-- doxytag: member="CFileAutoClose::m_file" ref="a0da5e36e648de49a47dd77843c52bcb9" args="" -->
<a class="el" href="classCFile.html">CFile</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a0da5e36e648de49a47dd77843c52bcb9">m_file</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a798581ea1bfd9cb6644865a65af04f1d"></a><!-- doxytag: member="CFileAutoClose::m_mode" ref="a798581ea1bfd9cb6644865a65af04f1d" args="" -->
<a class="el" href="classCFile.html#ae3d32843d7aec03b3ff5f73c57254010">CFile::OpenMode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a798581ea1bfd9cb6644865a65af04f1d">m_mode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3d71f2937c850404a784f0bb7762af66"></a><!-- doxytag: member="CFileAutoClose::m_autoClosed" ref="a3d71f2937c850404a784f0bb7762af66" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a3d71f2937c850404a784f0bb7762af66">m_autoClosed</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a58a2fe9995dd176338b3a235d19a52fe"></a><!-- doxytag: member="CFileAutoClose::m_locked" ref="a58a2fe9995dd176338b3a235d19a52fe" args="" -->
uint16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a58a2fe9995dd176338b3a235d19a52fe">m_locked</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a90d355f3fea73e3698cdaf14a9a775c3"></a><!-- doxytag: member="CFileAutoClose::m_size" ref="a90d355f3fea73e3698cdaf14a9a775c3" args="" -->
uint64&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a90d355f3fea73e3698cdaf14a9a775c3">m_size</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a11b71165bd04e2a239d720ec17e144ff"></a><!-- doxytag: member="CFileAutoClose::m_lastAccess" ref="a11b71165bd04e2a239d720ec17e144ff" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFileAutoClose.html#a11b71165bd04e2a239d720ec17e144ff">m_lastAccess</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class encapsulates the <a class="el" href="classCFile.html" title="This class is a modified version of the wxFile class.">CFile</a> class. </p>
<p>It allows to close the used file handle and reopen it on usage to minimize the number of used file handles. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab8d4baf5923d3af54eda87a629972e30"></a><!-- doxytag: member="CFileAutoClose::CFileAutoClose" ref="ab8d4baf5923d3af54eda87a629972e30" args="(const CPath &amp;path, CFile::OpenMode mode=CFile::read)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CFileAutoClose::CFileAutoClose </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCPath.html">CPath</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCFile.html#ae3d32843d7aec03b3ff5f73c57254010">CFile::OpenMode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em> = <code>CFile::read</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor, calls Open on the specified file. </p>
<p>To check if the file was successfully opened, a call to <a class="el" href="classCFileAutoClose.html#a3f9be385ed8d2c347dd982d98948cfbe" title="Returns true if the file is opened, false otherwise.">IsOpened()</a> is required. </p>

<p>References <a class="el" href="FileAutoClose_8cpp_source.html#l00046">Open()</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ae361e443fe6e4421eec7793cb6c87409"></a><!-- doxytag: member="CFileAutoClose::Close" ref="ae361e443fe6e4421eec7793cb6c87409" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CFileAutoClose::Close </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Closes the file. </p>
<p>Note that calling Close on an closed file is an illegal operation. </p>

<p>References <a class="el" href="CFile_8cpp_source.html#l00293">CFile::Close()</a>, <a class="el" href="FileAutoClose_8h_source.html#l00177">m_autoClosed</a>, and <a class="el" href="FileAutoClose_8h_source.html#l00171">m_file</a>.</p>

</div>
</div>
<a class="anchor" id="ae890bf901d0eaea4264d9b9c139e6df5"></a><!-- doxytag: member="CFileAutoClose::Create" ref="ae890bf901d0eaea4264d9b9c139e6df5" args="(const CPath &amp;path, bool overwrite=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CFileAutoClose::Create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCPath.html">CPath</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>overwrite</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calling Create is equivilant of calling open with OpenMode 'write'. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>overwrite</em>&nbsp;</td><td>Specifies if the target file should be overwritten, in case that it already exists.</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classCFile.html#a276f41388fbdd393dc446b02e1ba8ad0" title="Opens a file.">CFile::Open</a> </dd></dl>

<p>References <a class="el" href="CFile_8cpp_source.html#l00199">CFile::Create()</a>, <a class="el" href="FileAutoClose_8h_source.html#l00177">m_autoClosed</a>, <a class="el" href="FileAutoClose_8h_source.html#l00171">m_file</a>, <a class="el" href="FileAutoClose_8h_source.html#l00186">m_lastAccess</a>, and <a class="el" href="FileAutoClose_8h_source.html#l00174">m_mode</a>.</p>

</div>
</div>
<a class="anchor" id="a7352d831378cc648df0ae2b0456e31a5"></a><!-- doxytag: member="CFileAutoClose::fd" ref="a7352d831378cc648df0ae2b0456e31a5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CFileAutoClose::fd </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the file descriptior assosiated with the file. </p>
<p>This breaks the purpose of this class of course. Therefore the AutoClose mechanism is disabled when <a class="el" href="classCFileAutoClose.html#a7352d831378cc648df0ae2b0456e31a5" title="Returns the file descriptior assosiated with the file.">fd()</a> is called. It's required for FileArea's mmap stuff. Currently FileArea objects are shortlived enough for this not being a problem anyway, but that might change in the future. </p>

<p>References <a class="el" href="CFile_8cpp_source.html#l00181">CFile::fd()</a>, <a class="el" href="FileAutoClose_8h_source.html#l00171">m_file</a>, <a class="el" href="FileAutoClose_8h_source.html#l00180">m_locked</a>, and <a class="el" href="FileAutoClose_8cpp_source.html#l00126">Reopen()</a>.</p>

<p>Referenced by <a class="el" href="FileArea_8cpp_source.html#l00219">CFileArea::ReadAt()</a>.</p>

</div>
</div>
<a class="anchor" id="a3e67f15471439c5e3247e39305b85069"></a><!-- doxytag: member="CFileAutoClose::GetLength" ref="a3e67f15471439c5e3247e39305b85069" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64 CFileAutoClose::GetLength </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="see"><dt><b>See also:</b></dt><dd>CSafeFileIO::GetLength</dd></dl>
<p>Note that calling GetLength on a closed file is an illegal operation. </p>

<p>References <a class="el" href="CFile_8cpp_source.html#l00396">CFile::GetLength()</a>, <a class="el" href="FileAutoClose_8h_source.html#l00177">m_autoClosed</a>, <a class="el" href="FileAutoClose_8h_source.html#l00171">m_file</a>, and <a class="el" href="FileAutoClose_8h_source.html#l00183">m_size</a>.</p>

<p>Referenced by <a class="el" href="ThreadTasks_8cpp_source.html#l00083">CHashingTask::Entry()</a>.</p>

</div>
</div>
<a class="anchor" id="a63184609fc4759f33d9330dcb8515f1a"></a><!-- doxytag: member="CFileAutoClose::Open" ref="a63184609fc4759f33d9330dcb8515f1a" args="(const CPath &amp;path, CFile::OpenMode mode=CFile::read)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CFileAutoClose::Open </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCPath.html">CPath</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCFile.html#ae3d32843d7aec03b3ff5f73c57254010">CFile::OpenMode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em> = <code>CFile::read</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Opens a file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>The full or relative path to the file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>The opening mode (see <a class="el" href="classCFile.html" title="This class is a modified version of the wxFile class.">CFile</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if the file was opened, false otherwise. </dd></dl>

<p>References <a class="el" href="FileAutoClose_8h_source.html#l00177">m_autoClosed</a>, <a class="el" href="FileAutoClose_8h_source.html#l00171">m_file</a>, <a class="el" href="FileAutoClose_8h_source.html#l00186">m_lastAccess</a>, <a class="el" href="FileAutoClose_8h_source.html#l00180">m_locked</a>, <a class="el" href="FileAutoClose_8h_source.html#l00174">m_mode</a>, <a class="el" href="FileAutoClose_8h_source.html#l00183">m_size</a>, and <a class="el" href="CFile_8cpp_source.html#l00222">CFile::Open()</a>.</p>

<p>Referenced by <a class="el" href="FileAutoClose_8cpp_source.html#l00041">CFileAutoClose()</a>, and <a class="el" href="ThreadTasks_8cpp_source.html#l00083">CHashingTask::Entry()</a>.</p>

</div>
</div>
<a class="anchor" id="a8679220d4eb55f60fef2f9ee9e5c946c"></a><!-- doxytag: member="CFileAutoClose::ReadAt" ref="a8679220d4eb55f60fef2f9ee9e5c946c" args="(void *buffer, uint64 offset, size_t count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CFileAutoClose::ReadAt </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64&nbsp;</td>
          <td class="paramname"> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads 'count' bytes into 'buffer'. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>The target buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>The seek address in the file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>The number of bytes to read.</td></tr>
  </table>
  </dd>
</dl>
<p>See <a class="el" href="classCFileDataIO.html#af64cff2ab84643e7fdcd2b4366fece27" title="Reads &#39;count&#39; bytes into &#39;buffer&#39;.">CFileDataIO::Read</a> </p>

<p>References <a class="el" href="FileAutoClose_8h_source.html#l00171">m_file</a>, <a class="el" href="SafeFile_8cpp_source.html#l00072">CFileDataIO::Read()</a>, <a class="el" href="FileAutoClose_8cpp_source.html#l00126">Reopen()</a>, and <a class="el" href="SafeFile_8cpp_source.html#l00100">CFileDataIO::Seek()</a>.</p>

<p>Referenced by <a class="el" href="FileArea_8cpp_source.html#l00219">CFileArea::ReadAt()</a>.</p>

</div>
</div>
<a class="anchor" id="ad637900755ff47326023f1053e8550ba"></a><!-- doxytag: member="CFileAutoClose::Release" ref="ad637900755ff47326023f1053e8550ba" args="(bool now=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CFileAutoClose::Release </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>now</em> = <code>false</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request auto closing of the file handle. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>now</em>&nbsp;</td><td>true: close immediately false: close when timeout has expired </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if the file has been (or has already been) autoclosed. </dd></dl>

<p>References <a class="el" href="CFile_8cpp_source.html#l00293">CFile::Close()</a>, <a class="el" href="FileAutoClose_8cpp_source.html#l00082">GetFilePath()</a>, <a class="el" href="CFile_8cpp_source.html#l00396">CFile::GetLength()</a>, <a class="el" href="CFile_8cpp_source.html#l00187">CFile::IsOpened()</a>, <a class="el" href="FileAutoClose_8h_source.html#l00177">m_autoClosed</a>, <a class="el" href="FileAutoClose_8h_source.html#l00171">m_file</a>, <a class="el" href="FileAutoClose_8h_source.html#l00186">m_lastAccess</a>, <a class="el" href="FileAutoClose_8h_source.html#l00180">m_locked</a>, and <a class="el" href="FileAutoClose_8h_source.html#l00183">m_size</a>.</p>

</div>
</div>
<a class="anchor" id="a077ff3037a44ae331816ced403628424"></a><!-- doxytag: member="CFileAutoClose::WriteAt" ref="a077ff3037a44ae331816ced403628424" args="(const void *buffer, uint64 offset, size_t count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CFileAutoClose::WriteAt </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64&nbsp;</td>
          <td class="paramname"> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write 'count' bytes from 'buffer' into the file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>The source-data buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>The seek address in the file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>The number of bytes to write.</td></tr>
  </table>
  </dd>
</dl>
<p>See <a class="el" href="classCFileDataIO.html#a4ea42d721c52cb8df7679f27e899a2e3" title="Write &#39;count&#39; bytes from &#39;buffer&#39; into the file.">CFileDataIO::Write</a> </p>

<p>References <a class="el" href="FileAutoClose_8h_source.html#l00171">m_file</a>, <a class="el" href="FileAutoClose_8cpp_source.html#l00126">Reopen()</a>, <a class="el" href="SafeFile_8cpp_source.html#l00100">CFileDataIO::Seek()</a>, and <a class="el" href="SafeFile_8cpp_source.html#l00090">CFileDataIO::Write()</a>.</p>

<p>Referenced by <a class="el" href="FileArea_8cpp_source.html#l00278">CFileArea::FlushAt()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="FileAutoClose_8h_source.html">FileAutoClose.h</a></li>
<li>src/FileAutoClose.cpp</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 4 Dec 2014 for aMule by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
