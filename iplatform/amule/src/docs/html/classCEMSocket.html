<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>aMule: CEMSocket Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>CEMSocket Class Reference</h1><!-- doxytag: class="CEMSocket" --><!-- doxytag: inherits="CEncryptedStreamSocket,ThrottledFileSocket" --><div class="dynheader">
Inheritance diagram for CEMSocket:</div>
<div class="dynsection">
 <div class="center">
  <img src="classCEMSocket.gif" usemap="#CEMSocket_map" alt=""/>
  <map id="CEMSocket_map" name="CEMSocket_map">
<area href="classCEncryptedStreamSocket.html" alt="CEncryptedStreamSocket" shape="rect" coords="0,112,156,136"/>
<area href="classThrottledFileSocket.html" alt="ThrottledFileSocket" shape="rect" coords="166,112,322,136"/>
<area href="classCSocketClientProxy.html" alt="CSocketClientProxy" shape="rect" coords="0,56,156,80"/>
<area href="classThrottledControlSocket.html" alt="ThrottledControlSocket" shape="rect" coords="166,56,322,80"/>
<area href="classCProxySocket.html" alt="CProxySocket" shape="rect" coords="0,0,156,24"/>
<area href="classCClientTCPSocket.html" alt="CClientTCPSocket" shape="rect" coords="0,224,156,248"/>
<area href="classCServerSocket.html" alt="CServerSocket" shape="rect" coords="166,224,322,248"/>
</map>
 </div>
</div>

<p><a href="classCEMSocket-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCEMSocket_1_1StandardPacketQueueEntry.html">StandardPacketQueueEntry</a></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3c193bbb1aaaa3a8d3d0a06c6bf8dc88"></a><!-- doxytag: member="CEMSocket::CEMSocket" ref="a3c193bbb1aaaa3a8d3d0a06c6bf8dc88" args="(const CProxyData *ProxyData=NULL)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>CEMSocket</b> (const <a class="el" href="classCProxyData.html">CProxyData</a> *ProxyData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCEMSocket.html#ab410d8113285acfaac0ac268f455d06c">SendPacket</a> (<a class="el" href="classCPacket.html">CPacket</a> *packet, bool delpacket=true, bool controlpacket=true, uint32 actualPayloadSize=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad9b3899d6ae34680008aff1e6be74cdf"></a><!-- doxytag: member="CEMSocket::IsConnected" ref="ad9b3899d6ae34680008aff1e6be74cdf" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>IsConnected</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92999ac293e5e04a84864542ec2f70df"></a><!-- doxytag: member="CEMSocket::GetConState" ref="a92999ac293e5e04a84864542ec2f70df" args="()" -->
uint8&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetConState</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac3d3038d1eb21e06966fba29e1d3c828"></a><!-- doxytag: member="CEMSocket::SetDownloadLimit" ref="ac3d3038d1eb21e06966fba29e1d3c828" args="(uint32 limit)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>SetDownloadLimit</b> (uint32 limit)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab4d69509564ab3e1bb3cbc0a5ef58f81"></a><!-- doxytag: member="CEMSocket::DisableDownloadLimit" ref="ab4d69509564ab3e1bb3cbc0a5ef58f81" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>DisableDownloadLimit</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5dc926c06496f3e611a9593d439030c3"></a><!-- doxytag: member="CEMSocket::GetTimeOut" ref="a5dc926c06496f3e611a9593d439030c3" args="() const " -->
virtual uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetTimeOut</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c7645ff15336800919905e231818ee7"></a><!-- doxytag: member="CEMSocket::SetTimeOut" ref="a7c7645ff15336800919905e231818ee7" args="(uint32 uTimeOut)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>SetTimeOut</b> (uint32 uTimeOut)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2fbcd2c90b0f7d9c96f41bf056d3f333"></a><!-- doxytag: member="CEMSocket::GetLastCalledSend" ref="a2fbcd2c90b0f7d9c96f41bf056d3f333" args="()" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetLastCalledSend</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a82fe6db83c3c4f266be9e410f1ddf2dd"></a><!-- doxytag: member="CEMSocket::GetSentBytesCompleteFileSinceLastCallAndReset" ref="a82fe6db83c3c4f266be9e410f1ddf2dd" args="()" -->
uint64&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetSentBytesCompleteFileSinceLastCallAndReset</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe6c4049dd97f0176d139fb9bb293c59"></a><!-- doxytag: member="CEMSocket::GetSentBytesPartFileSinceLastCallAndReset" ref="afe6c4049dd97f0176d139fb9bb293c59" args="()" -->
uint64&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetSentBytesPartFileSinceLastCallAndReset</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a08e1eafc273d813048297be50db9c29d"></a><!-- doxytag: member="CEMSocket::GetSentBytesControlPacketSinceLastCallAndReset" ref="a08e1eafc273d813048297be50db9c29d" args="()" -->
uint64&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetSentBytesControlPacketSinceLastCallAndReset</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5604673b82a0667850067a4f443b5b2b"></a><!-- doxytag: member="CEMSocket::GetSentPayloadSinceLastCallAndReset" ref="a5604673b82a0667850067a4f443b5b2b" args="()" -->
uint64&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetSentPayloadSinceLastCallAndReset</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCEMSocket.html#acef4d9b73d6f670ecc579a4fafb823e5">TruncateQueues</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a677612c82610e2da8d9fd8a646ffb1ea"></a><!-- doxytag: member="CEMSocket::SendControlData" ref="a677612c82610e2da8d9fd8a646ffb1ea" args="(uint32 maxNumberOfBytesToSend, uint32 minFragSize)" -->
virtual <a class="el" href="structSocketSentBytes.html">SocketSentBytes</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>SendControlData</b> (uint32 maxNumberOfBytesToSend, uint32 minFragSize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48975c7193d6b01429f0dab944d7af95"></a><!-- doxytag: member="CEMSocket::SendFileAndControlData" ref="a48975c7193d6b01429f0dab944d7af95" args="(uint32 maxNumberOfBytesToSend, uint32 minFragSize)" -->
virtual <a class="el" href="structSocketSentBytes.html">SocketSentBytes</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>SendFileAndControlData</b> (uint32 maxNumberOfBytesToSend, uint32 minFragSize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCEMSocket.html#a17cf64b4461d18f479cf4b3d50f19c94">GetNeededBytes</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a97142ac51d81ca359d1cad6fb9f5ff45"></a><!-- doxytag: member="CEMSocket::Destroy" ref="a97142ac51d81ca359d1cad6fb9f5ff45" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>Destroy</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a09b2215a83379a02f438800bdf5749d8"></a><!-- doxytag: member="CEMSocket::OnDestroy" ref="a09b2215a83379a02f438800bdf5749d8" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>OnDestroy</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae5750e4247b2f65b6ceb12e5014d596f"></a><!-- doxytag: member="CEMSocket::OnError" ref="ae5750e4247b2f65b6ceb12e5014d596f" args="(int nErrorCode)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>OnError</b> (int nErrorCode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad054611c633df72975761aa231fa5045"></a><!-- doxytag: member="CEMSocket::OnSend" ref="ad054611c633df72975761aa231fa5045" args="(int nErrorCode)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>OnSend</b> (int nErrorCode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7284d6ad625ce8cd281d2f8973e13aa4"></a><!-- doxytag: member="CEMSocket::OnReceive" ref="a7284d6ad625ce8cd281d2f8973e13aa4" args="(int nErrorCode)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>OnReceive</b> (int nErrorCode)</td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="add50089c3b39231af9ba60e12c986cd7"></a><!-- doxytag: member="CEMSocket::PacketReceived" ref="add50089c3b39231af9ba60e12c986cd7" args="(CPacket *packet)" -->
virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>PacketReceived</b> (<a class="el" href="classCPacket.html">CPacket</a> *packet)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afba8175185ea3720b370395524c7603a"></a><!-- doxytag: member="CEMSocket::OnClose" ref="afba8175185ea3720b370395524c7603a" args="(int nErrorCode)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>OnClose</b> (int nErrorCode)</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a06fe0dcae99a93ed0b182ea6ae085cf9"></a><!-- doxytag: member="CEMSocket::byConnected" ref="a06fe0dcae99a93ed0b182ea6ae085cf9" args="" -->
uint8&nbsp;</td><td class="memItemRight" valign="bottom"><b>byConnected</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a66fd5ae307f0a38f057c368ecbb445ad"></a><!-- doxytag: member="CEMSocket::m_uTimeOut" ref="a66fd5ae307f0a38f057c368ecbb445ad" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_uTimeOut</b></td></tr>
<tr><td colspan="2"><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6892f079d96ee5106a7f7d58e40cdbd2"></a><!-- doxytag: member="CEMSocket::CPacketQueue" ref="a6892f079d96ee5106a7f7d58e40cdbd2" args="" -->
typedef std::list&lt; <a class="el" href="classCPacket.html">CPacket</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>CPacketQueue</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a622c775a1b763dbf450f11f4df327d88"></a><!-- doxytag: member="CEMSocket::CStdPacketQueue" ref="a622c775a1b763dbf450f11f4df327d88" args="" -->
typedef std::list<br class="typebreak"/>
&lt; <a class="el" href="structCEMSocket_1_1StandardPacketQueueEntry.html">StandardPacketQueueEntry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>CStdPacketQueue</b></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="structSocketSentBytes.html">SocketSentBytes</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCEMSocket.html#a5be6d1c13d23344f8912e386e3654139">Send</a> (uint32 maxNumberOfBytesToSend, uint32 minFragSize, bool onlyAllowedToSendControlPacket)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a43d31240acc1add01524d18ba97c6680"></a><!-- doxytag: member="CEMSocket::ClearQueues" ref="a43d31240acc1add01524d18ba97c6680" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>ClearQueues</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a02e0e31bf009b8b94eb5d9e266210b"></a><!-- doxytag: member="CEMSocket::GetNextFragSize" ref="a1a02e0e31bf009b8b94eb5d9e266210b" args="(uint32 current, uint32 minFragSize)" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetNextFragSize</b> (uint32 current, uint32 minFragSize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a23280339e7a82165187bfb693c63a495"></a><!-- doxytag: member="CEMSocket::HasSent" ref="a23280339e7a82165187bfb693c63a495" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>HasSent</b> ()</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6fd7d805dceaec3f690dff01ce7fab4b"></a><!-- doxytag: member="CEMSocket::downloadLimit" ref="a6fd7d805dceaec3f690dff01ce7fab4b" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>downloadLimit</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac4caf17b461f5513301f3e606ce6aaff"></a><!-- doxytag: member="CEMSocket::downloadLimitEnable" ref="ac4caf17b461f5513301f3e606ce6aaff" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>downloadLimitEnable</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0193e0cfbea99bed8bf4d10961e62655"></a><!-- doxytag: member="CEMSocket::pendingOnReceive" ref="a0193e0cfbea99bed8bf4d10961e62655" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>pendingOnReceive</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac606bf8e5858344876ee4f686bf8e288"></a><!-- doxytag: member="CEMSocket::pendingHeader" ref="ac606bf8e5858344876ee4f686bf8e288" args="[PACKET_HEADER_SIZE]" -->
byte&nbsp;</td><td class="memItemRight" valign="bottom"><b>pendingHeader</b> [PACKET_HEADER_SIZE]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab6fae5c23ff327d2a020cb7951297ead"></a><!-- doxytag: member="CEMSocket::pendingHeaderSize" ref="ab6fae5c23ff327d2a020cb7951297ead" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>pendingHeaderSize</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4051c2e338bd74c1d18104d6b722ed59"></a><!-- doxytag: member="CEMSocket::pendingPacket" ref="a4051c2e338bd74c1d18104d6b722ed59" args="" -->
byte *&nbsp;</td><td class="memItemRight" valign="bottom"><b>pendingPacket</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a52e92152998c716efb940ab519dd8c4a"></a><!-- doxytag: member="CEMSocket::pendingPacketSize" ref="a52e92152998c716efb940ab519dd8c4a" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>pendingPacketSize</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9016a1c2b1cbe7c6f37bed0adfc9ae69"></a><!-- doxytag: member="CEMSocket::sendbuffer" ref="a9016a1c2b1cbe7c6f37bed0adfc9ae69" args="" -->
byte *&nbsp;</td><td class="memItemRight" valign="bottom"><b>sendbuffer</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a769f4237d364d884e7190e949044fa40"></a><!-- doxytag: member="CEMSocket::sendblen" ref="a769f4237d364d884e7190e949044fa40" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>sendblen</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9b7357adadb714c333ae7afe4b732d19"></a><!-- doxytag: member="CEMSocket::sent" ref="a9b7357adadb714c333ae7afe4b732d19" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>sent</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad0c661b41ad3f3ccd098b29f00baf2f3"></a><!-- doxytag: member="CEMSocket::m_control_queue" ref="ad0c661b41ad3f3ccd098b29f00baf2f3" args="" -->
CPacketQueue&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_control_queue</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae4205890ec9356e5bbbf909a14b30c5d"></a><!-- doxytag: member="CEMSocket::m_standard_queue" ref="ae4205890ec9356e5bbbf909a14b30c5d" args="" -->
CStdPacketQueue&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_standard_queue</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a99eee066a74f2d0bacc406a61e77c9a1"></a><!-- doxytag: member="CEMSocket::m_currentPacket_is_controlpacket" ref="a99eee066a74f2d0bacc406a61e77c9a1" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_currentPacket_is_controlpacket</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1d8852dce4f5826c98c74ab3caa156c8"></a><!-- doxytag: member="CEMSocket::m_sendLocker" ref="a1d8852dce4f5826c98c74ab3caa156c8" args="" -->
wxMutex&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_sendLocker</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab293a2fc84199fdbb87102513f376253"></a><!-- doxytag: member="CEMSocket::m_numberOfSentBytesCompleteFile" ref="ab293a2fc84199fdbb87102513f376253" args="" -->
uint64&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_numberOfSentBytesCompleteFile</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af589f3a151abeb0e8a9cfb259313867b"></a><!-- doxytag: member="CEMSocket::m_numberOfSentBytesPartFile" ref="af589f3a151abeb0e8a9cfb259313867b" args="" -->
uint64&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_numberOfSentBytesPartFile</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf3a7bb839af42c84131db1c3cae721c"></a><!-- doxytag: member="CEMSocket::m_numberOfSentBytesControlPacket" ref="aaf3a7bb839af42c84131db1c3cae721c" args="" -->
uint64&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_numberOfSentBytesControlPacket</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af7965ccacc37f0d4a1f9aca5b333a028"></a><!-- doxytag: member="CEMSocket::m_currentPackageIsFromPartFile" ref="af7965ccacc37f0d4a1f9aca5b333a028" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_currentPackageIsFromPartFile</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad60efd5649511bf115b278ba08792f40"></a><!-- doxytag: member="CEMSocket::m_bAccelerateUpload" ref="ad60efd5649511bf115b278ba08792f40" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_bAccelerateUpload</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78370bb61036b165bd47c28c0c3f1d9f"></a><!-- doxytag: member="CEMSocket::lastCalledSend" ref="a78370bb61036b165bd47c28c0c3f1d9f" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>lastCalledSend</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad7dde877fd23cb382d607a305e2ce897"></a><!-- doxytag: member="CEMSocket::lastSent" ref="ad7dde877fd23cb382d607a305e2ce897" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>lastSent</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3e9306338a380b1a28456e53734845de"></a><!-- doxytag: member="CEMSocket::lastFinishedStandard" ref="a3e9306338a380b1a28456e53734845de" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>lastFinishedStandard</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3fadcedd9024c8ce24bd31e4ef38b8a4"></a><!-- doxytag: member="CEMSocket::m_actualPayloadSize" ref="a3fadcedd9024c8ce24bd31e4ef38b8a4" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_actualPayloadSize</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af903009f03dfb886fcd6dce8ab2bc367"></a><!-- doxytag: member="CEMSocket::m_actualPayloadSizeSent" ref="af903009f03dfb886fcd6dce8ab2bc367" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_actualPayloadSizeSent</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a28db466af9e72505392a07166ff4155d"></a><!-- doxytag: member="CEMSocket::m_bBusy" ref="a28db466af9e72505392a07166ff4155d" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_bBusy</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b2978f7f03b56db7e10d919f6893cb5"></a><!-- doxytag: member="CEMSocket::m_hasSent" ref="a2b2978f7f03b56db7e10d919f6893cb5" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_hasSent</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4fb5930c7ef71f547a317affaff1ceb8"></a><!-- doxytag: member="CEMSocket::DoingDestroy" ref="a4fb5930c7ef71f547a317affaff1ceb8" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>DoingDestroy</b></td></tr>
</table>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a17cf64b4461d18f479cf4b3d50f19c94"></a><!-- doxytag: member="CEMSocket::GetNeededBytes" ref="a17cf64b4461d18f479cf4b3d50f19c94" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 CEMSocket::GetNeededBytes </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decides the (minimum) amount the socket needs to send to prevent timeout. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>SlugFiller </dd></dl>

<p>Implements <a class="el" href="classThrottledFileSocket.html">ThrottledFileSocket</a>.</p>

</div>
</div>
<a class="anchor" id="a5be6d1c13d23344f8912e386e3654139"></a><!-- doxytag: member="CEMSocket::Send" ref="a5be6d1c13d23344f8912e386e3654139" args="(uint32 maxNumberOfBytesToSend, uint32 minFragSize, bool onlyAllowedToSendControlPacket)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structSocketSentBytes.html">SocketSentBytes</a> CEMSocket::Send </td>
          <td>(</td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>maxNumberOfBytesToSend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>minFragSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>onlyAllowedToSendControlPacket</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Try to put queued up data on the socket. </p>
<p>Control packets have higher priority, and will be sent first, if possible. Standard packets can be split up in several package containers. In that case all the parts of a split package must be sent in a row, without any control packet in between.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>maxNumberOfBytesToSend</em>&nbsp;</td><td>This is the maximum number of bytes that is allowed to be put on the socket this call. The actual number of sent bytes will be returned from the method.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>onlyAllowedToSendControlPacket</em>&nbsp;</td><td>This call we only try to put control packets on the sockets. If there's a standard packet "in the way", and we think that this socket is no longer an upload slot, then it is ok to send the standard packet to get it out of the way. But it is not allowed to pick a new standard packet from the queue during this call. Several split packets are counted as one standard packet though, so it is ok to finish them all off if necessary.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the actual number of bytes that were put on the socket. </dd></dl>

</div>
</div>
<a class="anchor" id="ab410d8113285acfaac0ac268f455d06c"></a><!-- doxytag: member="CEMSocket::SendPacket" ref="ab410d8113285acfaac0ac268f455d06c" args="(CPacket *packet, bool delpacket=true, bool controlpacket=true, uint32 actualPayloadSize=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CEMSocket::SendPacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPacket.html">CPacket</a> *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>delpacket</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>controlpacket</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>actualPayloadSize</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Queues up the packet to be sent. </p>
<p>Another thread will actually send the packet.</p>
<p>If the packet is not a control packet, and if the socket decides that its queue is full and forceAdd is false, then the socket is allowed to refuse to add the packet to its queue. It will then return false and it is up to the calling thread to try to call SendPacket for that packet again at a later time.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>address to the packet that should be added to the queue</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>delpacket</em>&nbsp;</td><td>if true, the responsibility for deleting the packet after it has been sent has been transferred to this object. If false, don't delete the packet after it has been sent.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>controlpacket</em>&nbsp;</td><td>the packet is a controlpacket</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>forceAdd</em>&nbsp;</td><td>this packet must be added to the queue, even if it is full. If this flag is true then the method can not refuse to add the packet, and therefore not return false.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the packet was added to the queue, false otherwise </dd></dl>

<p>Reimplemented in <a class="el" href="classCClientTCPSocket.html#a78237fc807229ec1d0cb1f3977c7df79">CClientTCPSocket</a>, and <a class="el" href="classCServerSocket.html#a0f6a39e240dfffbf7673d76f1eeba377">CServerSocket</a>.</p>

</div>
</div>
<a class="anchor" id="acef4d9b73d6f670ecc579a4fafb823e5"></a><!-- doxytag: member="CEMSocket::TruncateQueues" ref="acef4d9b73d6f670ecc579a4fafb823e5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CEMSocket::TruncateQueues </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes all packets from the standard queue that don't have to be sent for the socket to be able to send a control packet. </p>
<p>Before a socket can send a new packet, the current packet has to be finished. If the current packet is part of a split packet, then all parts of that split packet must be sent before the socket can send a control packet.</p>
<p>This method keeps in standard queue only those packets that must be sent (rest of split packet), and removes everything after it. The method doesn't touch the control packet queue. </p>

<p>Referenced by <a class="el" href="UploadClient_8cpp_source.html#l00667">CUpDownClient::FlushSendBlocks()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="EMSocket_8h_source.html">EMSocket.h</a></li>
<li>src/EMSocket.cpp</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 4 Dec 2014 for aMule by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
