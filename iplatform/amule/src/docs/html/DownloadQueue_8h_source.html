<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>aMule: src/DownloadQueue.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>src/DownloadQueue.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//</span>
<a name="l00002"></a>00002 <span class="comment">// This file is part of the aMule Project.</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">// Copyright (c) 2003-2011 aMule Team ( admin@amule.org / http://www.amule.org )</span>
<a name="l00005"></a>00005 <span class="comment">// Copyright (c) 2002-2011 Merkur ( devs@emule-project.net / http://www.emule-project.net )</span>
<a name="l00006"></a>00006 <span class="comment">//</span>
<a name="l00007"></a>00007 <span class="comment">// Any parts of this program derived from the xMule, lMule or eMule project,</span>
<a name="l00008"></a>00008 <span class="comment">// or contributed by third-party developers are copyrighted by their</span>
<a name="l00009"></a>00009 <span class="comment">// respective authors.</span>
<a name="l00010"></a>00010 <span class="comment">//</span>
<a name="l00011"></a>00011 <span class="comment">// This program is free software; you can redistribute it and/or modify</span>
<a name="l00012"></a>00012 <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l00013"></a>00013 <span class="comment">// the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00014"></a>00014 <span class="comment">// (at your option) any later version.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// This program is distributed in the hope that it will be useful,</span>
<a name="l00017"></a>00017 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00018"></a>00018 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00019"></a>00019 <span class="comment">// GNU General Public License for more details.</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l00022"></a>00022 <span class="comment">// along with this program; if not, write to the Free Software</span>
<a name="l00023"></a>00023 <span class="comment">// Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301, USA</span>
<a name="l00024"></a>00024 <span class="comment">//</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#ifndef DOWNLOADQUEUE_H</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">#define DOWNLOADQUEUE_H</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;MD4Hash.h&quot;</span>        <span class="comment">// Needed for CMD4Hash</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;ObservableQueue.h&quot;</span>    <span class="comment">// Needed for CObservableQueue</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;GetTickCount.h&quot;</span>   <span class="comment">// Needed fot GetTickCount</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;deque&gt;</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="keyword">class </span><a class="code" href="classCSharedFileList.html">CSharedFileList</a>;
<a name="l00038"></a>00038 <span class="keyword">class </span><a class="code" href="classCSearchFile.html" title="Represents a search-result returned from a server or client.">CSearchFile</a>;
<a name="l00039"></a>00039 <span class="keyword">class </span><a class="code" href="classCPartFile.html">CPartFile</a>;
<a name="l00040"></a>00040 <span class="keyword">class </span><a class="code" href="classCUpDownClient.html">CUpDownClient</a>;
<a name="l00041"></a>00041 <span class="keyword">class </span><a class="code" href="classCServer.html">CServer</a>;
<a name="l00042"></a>00042 <span class="keyword">class </span><a class="code" href="classCMemFile.html" title="CMemFile handles virtual files stored in memory.">CMemFile</a>;
<a name="l00043"></a>00043 <span class="keyword">class </span><a class="code" href="classCKnownFile.html">CKnownFile</a>;
<a name="l00044"></a>00044 <span class="keyword">class </span><a class="code" href="classCED2KLink.html">CED2KLink</a>;
<a name="l00045"></a>00045 <span class="keyword">class </span><a class="code" href="classCED2KFileLink.html">CED2KFileLink</a>;
<a name="l00046"></a>00046 <span class="keyword">class </span><a class="code" href="classCED2KServerLink.html">CED2KServerLink</a>;
<a name="l00047"></a>00047 <span class="keyword">class </span><a class="code" href="classCED2KServerListLink.html">CED2KServerListLink</a>;
<a name="l00048"></a>00048 <span class="keyword">class </span><a class="code" href="classCPath.html" title="This class wraps a path/filename, serving a purpose much like wxFileName.">CPath</a>;
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="keyword">namespace </span>Kademlia {
<a name="l00051"></a>00051     <span class="keyword">class </span>CUInt128;
<a name="l00052"></a>00052 }
<a name="l00053"></a>00053 
<a name="l00060"></a><a class="code" href="classCDownloadQueue.html">00060</a> <span class="keyword">class </span><a class="code" href="classCDownloadQueue.html" title="The download queue houses all active downloads.">CDownloadQueue</a> : <span class="keyword">public</span> <a class="code" href="classCObservableQueue.html" title="This class forms the superclass for observable queues or lists.">CObservableQueue</a>&lt;CPartFile*&gt;
<a name="l00061"></a>00061 {
<a name="l00062"></a>00062 <span class="keyword">public</span>:
<a name="l00066"></a>00066     <a class="code" href="classCDownloadQueue.html#a535b1da6bf45937c074861f453375a7f" title="Constructor.">CDownloadQueue</a>();
<a name="l00067"></a>00067 
<a name="l00071"></a>00071     <a class="code" href="classCDownloadQueue.html#a61d1eeaee70e0dc4be19460fd82fc544" title="Destructor.">~CDownloadQueue</a>();
<a name="l00072"></a>00072 
<a name="l00074"></a>00074     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a122349774932a2db46ab23e3e134cd4f" title="Loads met-files from the specified directory.">LoadMetFiles</a>(<span class="keyword">const</span> <a class="code" href="classCPath.html" title="This class wraps a path/filename, serving a purpose much like wxFileName.">CPath</a>&amp; path);
<a name="l00075"></a>00075 
<a name="l00079"></a>00079     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a8657754c2d6afcfd89375b4a4e857192" title="Main worker function.">Process</a>();
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 
<a name="l00088"></a>00088     <a class="code" href="classCPartFile.html">CPartFile</a>* <a class="code" href="classCDownloadQueue.html#a3613b7e4b35a207a2aa7042e34f5c9f4" title="Returns a pointer to the file with the specified hash, or NULL.">GetFileByID</a>(<span class="keyword">const</span> <a class="code" href="classCMD4Hash.html" title="Container-class for the MD4 hashes used in aMule.">CMD4Hash</a>&amp; filehash) <span class="keyword">const</span>;
<a name="l00089"></a>00089     
<a name="l00096"></a>00096     <a class="code" href="classCPartFile.html">CPartFile</a>* <a class="code" href="classCDownloadQueue.html#aab959e5772c45a300f591638db1b93da" title="Returns the file at the specified position in the file-list, or NULL if invalid.">GetFileByIndex</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idx) <span class="keyword">const</span>;
<a name="l00097"></a>00097     
<a name="l00098"></a>00098     
<a name="l00102"></a>00102     <span class="keywordtype">bool</span>    <a class="code" href="classCDownloadQueue.html#a69b08bfefe72205168ab14bf04e83690" title="Returns true if the file is currently being shared or downloaded.">IsFileExisting</a>(<span class="keyword">const</span> <a class="code" href="classCMD4Hash.html" title="Container-class for the MD4 hashes used in aMule.">CMD4Hash</a>&amp; fileid) <span class="keyword">const</span>;
<a name="l00103"></a>00103     
<a name="l00107"></a>00107     <span class="keywordtype">bool</span>    <a class="code" href="classCDownloadQueue.html#a7ced3914956072120a4f1ce93aee2c05" title="Returns true if the specified file is on the download-queue.">IsPartFile</a>(<span class="keyword">const</span> <a class="code" href="classCKnownFile.html">CKnownFile</a>* file) <span class="keyword">const</span>;
<a name="l00108"></a>00108     
<a name="l00112"></a>00112     <span class="keywordtype">void</span> <a class="code" href="classCDownloadQueue.html#a066f4891c40f5f84a7ce5b90ddc48815" title="Updates the file&amp;#39;s download active time.">OnConnectionState</a>(<span class="keywordtype">bool</span> bConnected);
<a name="l00113"></a>00113     
<a name="l00123"></a>00123     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#af31a136ab20fdf1b4a16009f8b6283f6" title="Starts a new download based on the specified search-result.">AddSearchToDownload</a>(<a class="code" href="classCSearchFile.html" title="Represents a search-result returned from a server or client.">CSearchFile</a>* toadd, uint8 category);
<a name="l00124"></a>00124     
<a name="l00125"></a>00125     
<a name="l00133"></a>00133     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#ab6cec8c090865ec4e431fb51ff7d87fc" title="Adds an existing partfile to the queue.">AddDownload</a>(<a class="code" href="classCPartFile.html">CPartFile</a>* newfile, <span class="keywordtype">bool</span> paused, uint8 category);
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 
<a name="l00142"></a>00142     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a70203682ccc5df6a45c55c1d9c809cc2" title="Removes the specified file from the queue.">RemoveFile</a>(<a class="code" href="classCPartFile.html">CPartFile</a>* toremove, <span class="keywordtype">bool</span> keepAsCompleted = <span class="keyword">false</span>);
<a name="l00143"></a>00143     
<a name="l00144"></a>00144     
<a name="l00148"></a>00148     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a5d0cba092b1ad93a9408df017c318046" title="Saves the source-seeds of every file on the queue.">SaveSourceSeeds</a>();
<a name="l00149"></a>00149     
<a name="l00153"></a>00153     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#ab7c309806762279f18f5f27b2762cabc" title="Loads the source-seeds of every file on the queue.">LoadSourceSeeds</a>();
<a name="l00154"></a>00154 
<a name="l00155"></a>00155     
<a name="l00166"></a>00166     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#aec828dff750b3c73b48fd6315f5c91bd" title="Adds a potiential new client to the specified file.">CheckAndAddSource</a>(<a class="code" href="classCPartFile.html">CPartFile</a>* sender, <a class="code" href="classCUpDownClient.html">CUpDownClient</a>* source);
<a name="l00167"></a>00167     
<a name="l00178"></a>00178     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#abc3acf6acf68639bf30972616dbfdba0" title="This function adds already known source to the specified file.">CheckAndAddKnownSource</a>(<a class="code" href="classCPartFile.html">CPartFile</a>* sender, <a class="code" href="classCUpDownClient.html">CUpDownClient</a>* source);
<a name="l00179"></a>00179     
<a name="l00180"></a>00180     
<a name="l00193"></a>00193     <span class="keywordtype">bool</span>    <a class="code" href="classCDownloadQueue.html#a4faa385ebab56cfadb5273365998b323" title="Removes the specified client completly.">RemoveSource</a>(<a class="code" href="classCUpDownClient.html">CUpDownClient</a>* toremove, <span class="keywordtype">bool</span> updatewindow = <span class="keyword">true</span>, <span class="keywordtype">bool</span> bDoStatsUpdate = <span class="keyword">true</span>);
<a name="l00194"></a>00194 
<a name="l00195"></a>00195 
<a name="l00203"></a>00203     <a class="code" href="classCUpDownClient.html">CUpDownClient</a>* <a class="code" href="classCDownloadQueue.html#acb08ffb35ca10a5789a988085ee574c9" title="Finds the queued client by IP and UDP-port, by looking at file-sources.">GetDownloadClientByIP_UDP</a>(uint32 dwIP, uint16 nUDPPort) <span class="keyword">const</span>;
<a name="l00204"></a>00204     
<a name="l00205"></a>00205 
<a name="l00209"></a>00209     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a7107266ac67ab16fc698da12234ec208" title="Queues the specified file for source-requestion from the connected server.">SendLocalSrcRequest</a>(<a class="code" href="classCPartFile.html">CPartFile</a>* sender);
<a name="l00210"></a>00210 
<a name="l00214"></a>00214     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#ae5f0a490fb97ca80ab7bdce4f19d4061" title="Removes the specified server from the request-queue.">RemoveLocalServerRequest</a>(<a class="code" href="classCPartFile.html">CPartFile</a>* pFile);
<a name="l00215"></a>00215     
<a name="l00219"></a>00219     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a04932e62ed208305df22509d5b9b5a3f" title="Resets all queued server-requests.">ResetLocalServerRequests</a>();
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 
<a name="l00226"></a>00226     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a456551034265541eea0ceece9f526df4" title="Starts the next paused file on the queue, going after priority.">StartNextFile</a>(<a class="code" href="classCPartFile.html">CPartFile</a>* oldfile);
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 
<a name="l00232"></a>00232     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a7b20bda119d3d274e6a62a998e8cd66e" title="Resets the category of all files with the specified category.">ResetCatParts</a>(uint8 cat);
<a name="l00233"></a>00233 
<a name="l00237"></a>00237     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a19f92465551dd9eb3033326a579b1bf9" title="Sets the priority of all files with the specified category.">SetCatPrio</a>(uint8 cat, uint8 newprio);
<a name="l00238"></a>00238 
<a name="l00242"></a>00242     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#ad8b0b99302ebd970b65e082d74a43ed1" title="Sets the status of all files with the specified category.">SetCatStatus</a>(uint8 cat, <span class="keywordtype">int</span> newstatus);
<a name="l00243"></a>00243 
<a name="l00247"></a>00247     uint16  <a class="code" href="classCDownloadQueue.html#a4afdaa4a0005b6a409eb9156ba770c60" title="Returns the current number of queued files.">GetFileCount</a>() <span class="keyword">const</span>;
<a name="l00248"></a>00248 
<a name="l00252"></a>00252     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#af416cfa4702c432171f2e0acfd0d055e" title="Makes a copy of the file list.">CopyFileList</a>(std::vector&lt;CPartFile*&gt;&amp; out_list, <span class="keywordtype">bool</span> includeCompleted = <span class="keyword">false</span>) <span class="keyword">const</span>;
<a name="l00253"></a>00253 
<a name="l00257"></a>00257     uint16  <a class="code" href="classCDownloadQueue.html#a8a3ede3222b2b2a8ef91d6a1bad4d9c7" title="Returns the current number of downloading files.">GetDownloadingFileCount</a>() <span class="keyword">const</span>;
<a name="l00258"></a>00258 
<a name="l00262"></a>00262     uint16  <a class="code" href="classCDownloadQueue.html#a852e350315ba3dbb7084583337cef1ec" title="Returns the current number of paused files.">GetPausedFileCount</a>() <span class="keyword">const</span>;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264 
<a name="l00268"></a>00268     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#aa307bb211a7bc6874c5b5302dc4a6443" title="This function is called when a DNS lookup is finished.">OnHostnameResolved</a>(uint32 ip);
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 
<a name="l00274"></a>00274     <span class="keywordtype">bool</span>    <a class="code" href="classCDownloadQueue.html#a5e97c6ab258cf32577d23813f1b55a05" title="Adds an ed2k or magnet link to download queue.">AddLink</a>( <span class="keyword">const</span> wxString&amp; link, uint8 category = 0 );
<a name="l00275"></a>00275 
<a name="l00276"></a>00276     <span class="keywordtype">bool</span>    AddED2KLink( <span class="keyword">const</span> wxString&amp; link, uint8 category = 0 );
<a name="l00277"></a>00277     <span class="keywordtype">bool</span>    AddED2KLink( <span class="keyword">const</span> <a class="code" href="classCED2KLink.html">CED2KLink</a>* link, uint8 category = 0 );
<a name="l00278"></a>00278     <span class="keywordtype">bool</span>    AddED2KLink( <span class="keyword">const</span> <a class="code" href="classCED2KFileLink.html">CED2KFileLink</a>* link, uint8 category = 0 );
<a name="l00279"></a>00279     <span class="keywordtype">bool</span>    AddED2KLink( <span class="keyword">const</span> <a class="code" href="classCED2KServerLink.html">CED2KServerLink</a>* link );
<a name="l00280"></a>00280     <span class="keywordtype">bool</span>    AddED2KLink( <span class="keyword">const</span> <a class="code" href="classCED2KServerListLink.html">CED2KServerListLink</a>* link );
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 
<a name="l00286"></a>00286     <a class="code" href="classCServer.html">CServer</a>* <a class="code" href="classCDownloadQueue.html#a0a384df23ba8e9c428f1018b057057ed" title="Returns the current server which is beening queried by UDP packets.">GetUDPServer</a>() <span class="keyword">const</span>;
<a name="l00287"></a>00287 
<a name="l00291"></a>00291     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#ab83f2fd149fd24af359cb46976bedb64" title="Set the server to query through UDP packest.">SetUDPServer</a>( <a class="code" href="classCServer.html">CServer</a>* server );
<a name="l00292"></a>00292     
<a name="l00293"></a>00293 
<a name="l00297"></a>00297     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a8fdebf5825fc616ba8f937e0f634b4ad" title="Stop the source-requests from non-connected servers.">StopUDPRequests</a>();
<a name="l00298"></a>00298     
<a name="l00299"></a>00299     <span class="comment">/* Kad Stuff */</span>
<a name="l00300"></a>00300     
<a name="l00304"></a>00304      <span class="keywordtype">void</span>   <a class="code" href="classCDownloadQueue.html#a418f5a92095e039bf3d308b76c037472" title="Add a Kad source to a download.">KademliaSearchFile</a>(uint32_t searchID, <span class="keyword">const</span> <a class="code" href="classKademlia_1_1CUInt128.html">Kademlia::CUInt128</a>* pcontactID, <span class="keyword">const</span> <a class="code" href="classKademlia_1_1CUInt128.html">Kademlia::CUInt128</a>* pkadID, uint8_t type, uint32_t ip, uint16_t tcp, uint16_t udp, uint32_t buddyip, uint16_t buddyport, uint8_t byCryptOptions);
<a name="l00305"></a>00305     
<a name="l00306"></a>00306     <a class="code" href="classCPartFile.html">CPartFile</a>* GetFileByKadFileSearchID(uint32 <span class="keywordtype">id</span>) <span class="keyword">const</span>;
<a name="l00307"></a>00307     
<a name="l00308"></a>00308     <span class="keywordtype">bool</span>    DoKademliaFileRequest();
<a name="l00309"></a>00309     
<a name="l00310"></a>00310     <span class="keywordtype">void</span>    SetLastKademliaFileRequest()    {lastkademliafilerequest = ::GetTickCount();}
<a name="l00311"></a>00311     
<a name="l00312"></a>00312     uint32  GetRareFileThreshold()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCDownloadQueue.html#a0bcf63482507f7f1bb479a9a5a951f33" title="Threshold for rare files, dynamically based on the sources for each.">m_rareFileThreshold</a>; }
<a name="l00313"></a>00313     uint32  GetCommonFileThreshold()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCDownloadQueue.html#a29e4fbf1c95eede560b4b9dede801769" title="Threshold for common files, dynamically based on the sources for each.">m_commonFileThreshold</a>; }
<a name="l00314"></a>00314 
<a name="l00318"></a>00318     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a1abb30d2257f28ecc1b408d60d723faa" title="Remove a file from the list of completed downloads.">ClearCompleted</a>(<span class="keyword">const</span> ListOfUInts32 &amp; ecids);
<a name="l00319"></a>00319     
<a name="l00320"></a>00320 <span class="keyword">private</span>:
<a name="l00324"></a>00324     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classCDownloadQueue.html#a72c94d8e90868ec08d83a79c00aa0ab9" title="This function initializes new observers with the current contents of the queue.">ObserverAdded</a>( <a class="code" href="classCObserver.html">ObserverType</a>* o );
<a name="l00325"></a>00325     
<a name="l00326"></a>00326 
<a name="l00330"></a>00330     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a2d77d536e249056f22e38dca197af8a1" title="Helper-function, sorts the filelist so that high-priority files are first.">DoSortByPriority</a>();
<a name="l00331"></a>00331     
<a name="l00333"></a>00333     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a0c0544c0709d17e5fa565d0442fa5656" title="Checks that there is enough free spaces for temp-files at that specified path.">CheckDiskspace</a>(<span class="keyword">const</span> <a class="code" href="classCPath.html" title="This class wraps a path/filename, serving a purpose much like wxFileName.">CPath</a>&amp; path);
<a name="l00334"></a>00334 
<a name="l00338"></a>00338     <span class="keywordtype">void</span>    <a class="code" href="classCDownloadQueue.html#a432abdd07e9e1cd352775426f8a8b5f4" title="Stops performing UDP requests.">DoStopUDPRequests</a>();
<a name="l00339"></a>00339 
<a name="l00340"></a>00340     
<a name="l00341"></a>00341     <span class="keywordtype">void</span>    ProcessLocalRequests();
<a name="l00342"></a>00342     
<a name="l00343"></a>00343     <span class="keywordtype">bool</span>    SendNextUDPPacket();
<a name="l00344"></a>00344     <span class="keywordtype">int</span>     GetMaxFilesPerUDPServerPacket() <span class="keyword">const</span>;
<a name="l00345"></a>00345     <span class="keywordtype">bool</span>    SendGlobGetSourcesUDPPacket(<a class="code" href="classCMemFile.html" title="CMemFile handles virtual files stored in memory.">CMemFile</a>&amp; data);
<a name="l00346"></a>00346     
<a name="l00347"></a>00347     <span class="keywordtype">void</span>    AddToResolve(<span class="keyword">const</span> <a class="code" href="classCMD4Hash.html" title="Container-class for the MD4 hashes used in aMule.">CMD4Hash</a>&amp; fileid, <span class="keyword">const</span> wxString&amp; pszHostname, uint16 port, <span class="keyword">const</span> wxString&amp; hash, uint8 cryptoptions);
<a name="l00348"></a>00348 
<a name="l00350"></a><a class="code" href="classCDownloadQueue.html#a015ae83ec6c131dbaca7c4486573a453">00350</a>     <span class="keyword">mutable</span> wxMutex <a class="code" href="classCDownloadQueue.html#a015ae83ec6c131dbaca7c4486573a453" title="The mutex assosiated with this class, mutable to allow for const functions.">m_mutex</a>;
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 
<a name="l00353"></a>00353     uint32      m_datarate;
<a name="l00354"></a>00354     uint32      m_lastDiskCheck;
<a name="l00355"></a>00355     uint32      m_lastudpsearchtime;
<a name="l00356"></a>00356     uint32      m_lastsorttime;
<a name="l00357"></a>00357     uint32      m_lastudpstattime;
<a name="l00358"></a>00358     uint32      m_nLastED2KLinkCheck;
<a name="l00359"></a>00359     uint8       m_cRequestsSentToServer;
<a name="l00360"></a>00360     uint32      m_dwNextTCPSrcReq;
<a name="l00361"></a>00361     uint8       m_udcounter;
<a name="l00362"></a>00362     <a class="code" href="classCServer.html">CServer</a>*    m_udpserver;
<a name="l00363"></a>00363 
<a name="l00364"></a>00364     
<a name="l00368"></a><a class="code" href="structCDownloadQueue_1_1Hostname__Entry.html">00368</a>     <span class="keyword">struct </span><a class="code" href="structCDownloadQueue_1_1Hostname__Entry.html" title="Structure used to store sources with dynamic hostnames.">Hostname_Entry</a>
<a name="l00369"></a>00369     {
<a name="l00371"></a><a class="code" href="structCDownloadQueue_1_1Hostname__Entry.html#a49cf1d3e32561d15bd13d08fd17aacee">00371</a>         <a class="code" href="classCMD4Hash.html" title="Container-class for the MD4 hashes used in aMule.">CMD4Hash</a> fileid;
<a name="l00373"></a><a class="code" href="structCDownloadQueue_1_1Hostname__Entry.html#a88c739c1ae0a452742a272e7a688442f">00373</a>         wxString <a class="code" href="structCDownloadQueue_1_1Hostname__Entry.html#a88c739c1ae0a452742a272e7a688442f" title="The dynamic hostname.">strHostname</a>;
<a name="l00375"></a><a class="code" href="structCDownloadQueue_1_1Hostname__Entry.html#adabef91dfcb4e8055ed7c5b19253229a">00375</a>         uint16 port;
<a name="l00377"></a><a class="code" href="structCDownloadQueue_1_1Hostname__Entry.html#a1dc20df00973dba16a15a488cfb6d78c">00377</a>         wxString hash;
<a name="l00379"></a><a class="code" href="structCDownloadQueue_1_1Hostname__Entry.html#a8c9e2974f5489edd30e209f0bb3ad4b6">00379</a>         uint8 cryptoptions;
<a name="l00380"></a>00380     };
<a name="l00381"></a>00381 
<a name="l00382"></a>00382     std::deque&lt;Hostname_Entry&gt;  m_toresolve;
<a name="l00383"></a>00383     
<a name="l00384"></a>00384     <span class="keyword">typedef</span> std::deque&lt;CPartFile*&gt; FileQueue;
<a name="l00385"></a>00385     FileQueue m_filelist;
<a name="l00386"></a>00386     
<a name="l00387"></a>00387     <span class="keyword">typedef</span> std::list&lt;CPartFile*&gt; FileList;
<a name="l00388"></a>00388     FileList        m_localServerReqQueue;
<a name="l00389"></a>00389 
<a name="l00391"></a><a class="code" href="classCDownloadQueue.html#a9b9d788af3a1e621fa7e963c5088cbe2">00391</a>     FileList        <a class="code" href="classCDownloadQueue.html#a9b9d788af3a1e621fa7e963c5088cbe2" title="List of downloads completed and still on display.">m_completedDownloads</a>;
<a name="l00392"></a>00392 
<a name="l00394"></a><a class="code" href="classCDownloadQueue.html#ae8944a7069097ea35e5b3bceca14cbda">00394</a>     <a class="code" href="classCQueueObserver.html">CQueueObserver&lt;CServer*&gt;</a>    <a class="code" href="classCDownloadQueue.html#ae8944a7069097ea35e5b3bceca14cbda" title="Observer used to keep track of which servers have yet to be asked for sources.">m_queueServers</a>;
<a name="l00395"></a>00395     
<a name="l00397"></a><a class="code" href="classCDownloadQueue.html#ae0d15dd85e2079d760a010249bca16e5">00397</a>     <a class="code" href="classCQueueObserver.html">CQueueObserver&lt;CPartFile*&gt;</a>  <a class="code" href="classCDownloadQueue.html#ae0d15dd85e2079d760a010249bca16e5" title="Observer used to keep track of which file to send UDP requests for.">m_queueFiles</a>;
<a name="l00398"></a>00398     
<a name="l00399"></a>00399     <span class="comment">/* Kad Stuff */</span>
<a name="l00400"></a>00400     uint32      lastkademliafilerequest;
<a name="l00401"></a>00401 
<a name="l00403"></a><a class="code" href="classCDownloadQueue.html#a0bcf63482507f7f1bb479a9a5a951f33">00403</a>     uint32      <a class="code" href="classCDownloadQueue.html#a0bcf63482507f7f1bb479a9a5a951f33" title="Threshold for rare files, dynamically based on the sources for each.">m_rareFileThreshold</a>;
<a name="l00404"></a>00404     
<a name="l00406"></a><a class="code" href="classCDownloadQueue.html#a29e4fbf1c95eede560b4b9dede801769">00406</a>     uint32      <a class="code" href="classCDownloadQueue.html#a29e4fbf1c95eede560b4b9dede801769" title="Threshold for common files, dynamically based on the sources for each.">m_commonFileThreshold</a>;
<a name="l00407"></a>00407 };
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 <span class="preprocessor">#endif // DOWNLOADQUEUE_H</span>
<a name="l00410"></a>00410 <span class="preprocessor"></span><span class="comment">// File_checked_for_headers</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 4 Dec 2014 for aMule by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
