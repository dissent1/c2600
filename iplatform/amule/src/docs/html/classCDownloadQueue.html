<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>aMule: CDownloadQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>CDownloadQueue Class Reference</h1><!-- doxytag: class="CDownloadQueue" --><!-- doxytag: inherits="CObservableQueue&lt; CPartFile * &gt;" -->
<p>The download queue houses all active downloads.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="DownloadQueue_8h_source.html">DownloadQueue.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CDownloadQueue:</div>
<div class="dynsection">
 <div class="center">
  <img src="classCDownloadQueue.gif" usemap="#CDownloadQueue_map" alt=""/>
  <map id="CDownloadQueue_map" name="CDownloadQueue_map">
<area href="classCObservableQueue.html" alt="CObservableQueue&lt; CPartFile * &gt;" shape="rect" coords="0,56,279,80"/>
<area href="classCObservable.html" alt="CObservable&lt; CQueueEvent&lt; CPartFile * &gt; &gt;" shape="rect" coords="0,0,279,24"/>
</map>
 </div>
</div>

<p><a href="classCDownloadQueue-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCDownloadQueue_1_1Hostname__Entry.html">Hostname_Entry</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Structure used to store sources with dynamic hostnames.  <a href="structCDownloadQueue_1_1Hostname__Entry.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a535b1da6bf45937c074861f453375a7f"></a><!-- doxytag: member="CDownloadQueue::CDownloadQueue" ref="a535b1da6bf45937c074861f453375a7f" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a535b1da6bf45937c074861f453375a7f">CDownloadQueue</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a61d1eeaee70e0dc4be19460fd82fc544"></a><!-- doxytag: member="CDownloadQueue::~CDownloadQueue" ref="a61d1eeaee70e0dc4be19460fd82fc544" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a61d1eeaee70e0dc4be19460fd82fc544">~CDownloadQueue</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a122349774932a2db46ab23e3e134cd4f">LoadMetFiles</a> (const <a class="el" href="classCPath.html">CPath</a> &amp;path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8657754c2d6afcfd89375b4a4e857192"></a><!-- doxytag: member="CDownloadQueue::Process" ref="a8657754c2d6afcfd89375b4a4e857192" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a8657754c2d6afcfd89375b4a4e857192">Process</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCPartFile.html">CPartFile</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a3613b7e4b35a207a2aa7042e34f5c9f4">GetFileByID</a> (const <a class="el" href="classCMD4Hash.html">CMD4Hash</a> &amp;filehash) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCPartFile.html">CPartFile</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#aab959e5772c45a300f591638db1b93da">GetFileByIndex</a> (unsigned int idx) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a69b08bfefe72205168ab14bf04e83690"></a><!-- doxytag: member="CDownloadQueue::IsFileExisting" ref="a69b08bfefe72205168ab14bf04e83690" args="(const CMD4Hash &amp;fileid) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a69b08bfefe72205168ab14bf04e83690">IsFileExisting</a> (const <a class="el" href="classCMD4Hash.html">CMD4Hash</a> &amp;fileid) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7ced3914956072120a4f1ce93aee2c05"></a><!-- doxytag: member="CDownloadQueue::IsPartFile" ref="a7ced3914956072120a4f1ce93aee2c05" args="(const CKnownFile *file) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a7ced3914956072120a4f1ce93aee2c05">IsPartFile</a> (const <a class="el" href="classCKnownFile.html">CKnownFile</a> *file) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a066f4891c40f5f84a7ce5b90ddc48815"></a><!-- doxytag: member="CDownloadQueue::OnConnectionState" ref="a066f4891c40f5f84a7ce5b90ddc48815" args="(bool bConnected)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a066f4891c40f5f84a7ce5b90ddc48815">OnConnectionState</a> (bool bConnected)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#af31a136ab20fdf1b4a16009f8b6283f6">AddSearchToDownload</a> (<a class="el" href="classCSearchFile.html">CSearchFile</a> *toadd, uint8 category)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#ab6cec8c090865ec4e431fb51ff7d87fc">AddDownload</a> (<a class="el" href="classCPartFile.html">CPartFile</a> *newfile, bool paused, uint8 category)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a70203682ccc5df6a45c55c1d9c809cc2">RemoveFile</a> (<a class="el" href="classCPartFile.html">CPartFile</a> *toremove, bool keepAsCompleted=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d0cba092b1ad93a9408df017c318046"></a><!-- doxytag: member="CDownloadQueue::SaveSourceSeeds" ref="a5d0cba092b1ad93a9408df017c318046" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a5d0cba092b1ad93a9408df017c318046">SaveSourceSeeds</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab7c309806762279f18f5f27b2762cabc"></a><!-- doxytag: member="CDownloadQueue::LoadSourceSeeds" ref="ab7c309806762279f18f5f27b2762cabc" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#ab7c309806762279f18f5f27b2762cabc">LoadSourceSeeds</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#aec828dff750b3c73b48fd6315f5c91bd">CheckAndAddSource</a> (<a class="el" href="classCPartFile.html">CPartFile</a> *sender, <a class="el" href="classCUpDownClient.html">CUpDownClient</a> *source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#abc3acf6acf68639bf30972616dbfdba0">CheckAndAddKnownSource</a> (<a class="el" href="classCPartFile.html">CPartFile</a> *sender, <a class="el" href="classCUpDownClient.html">CUpDownClient</a> *source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a4faa385ebab56cfadb5273365998b323">RemoveSource</a> (<a class="el" href="classCUpDownClient.html">CUpDownClient</a> *toremove, bool updatewindow=true, bool bDoStatsUpdate=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCUpDownClient.html">CUpDownClient</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#acb08ffb35ca10a5789a988085ee574c9">GetDownloadClientByIP_UDP</a> (uint32 dwIP, uint16 nUDPPort) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7107266ac67ab16fc698da12234ec208"></a><!-- doxytag: member="CDownloadQueue::SendLocalSrcRequest" ref="a7107266ac67ab16fc698da12234ec208" args="(CPartFile *sender)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a7107266ac67ab16fc698da12234ec208">SendLocalSrcRequest</a> (<a class="el" href="classCPartFile.html">CPartFile</a> *sender)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae5f0a490fb97ca80ab7bdce4f19d4061"></a><!-- doxytag: member="CDownloadQueue::RemoveLocalServerRequest" ref="ae5f0a490fb97ca80ab7bdce4f19d4061" args="(CPartFile *pFile)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#ae5f0a490fb97ca80ab7bdce4f19d4061">RemoveLocalServerRequest</a> (<a class="el" href="classCPartFile.html">CPartFile</a> *pFile)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a04932e62ed208305df22509d5b9b5a3f"></a><!-- doxytag: member="CDownloadQueue::ResetLocalServerRequests" ref="a04932e62ed208305df22509d5b9b5a3f" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a04932e62ed208305df22509d5b9b5a3f">ResetLocalServerRequests</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a456551034265541eea0ceece9f526df4">StartNextFile</a> (<a class="el" href="classCPartFile.html">CPartFile</a> *oldfile)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7b20bda119d3d274e6a62a998e8cd66e"></a><!-- doxytag: member="CDownloadQueue::ResetCatParts" ref="a7b20bda119d3d274e6a62a998e8cd66e" args="(uint8 cat)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a7b20bda119d3d274e6a62a998e8cd66e">ResetCatParts</a> (uint8 cat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a19f92465551dd9eb3033326a579b1bf9"></a><!-- doxytag: member="CDownloadQueue::SetCatPrio" ref="a19f92465551dd9eb3033326a579b1bf9" args="(uint8 cat, uint8 newprio)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a19f92465551dd9eb3033326a579b1bf9">SetCatPrio</a> (uint8 cat, uint8 newprio)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad8b0b99302ebd970b65e082d74a43ed1"></a><!-- doxytag: member="CDownloadQueue::SetCatStatus" ref="ad8b0b99302ebd970b65e082d74a43ed1" args="(uint8 cat, int newstatus)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#ad8b0b99302ebd970b65e082d74a43ed1">SetCatStatus</a> (uint8 cat, int newstatus)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4afdaa4a0005b6a409eb9156ba770c60"></a><!-- doxytag: member="CDownloadQueue::GetFileCount" ref="a4afdaa4a0005b6a409eb9156ba770c60" args="() const " -->
uint16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a4afdaa4a0005b6a409eb9156ba770c60">GetFileCount</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af416cfa4702c432171f2e0acfd0d055e"></a><!-- doxytag: member="CDownloadQueue::CopyFileList" ref="af416cfa4702c432171f2e0acfd0d055e" args="(std::vector&lt; CPartFile * &gt; &amp;out_list, bool includeCompleted=false) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#af416cfa4702c432171f2e0acfd0d055e">CopyFileList</a> (std::vector&lt; <a class="el" href="classCPartFile.html">CPartFile</a> * &gt; &amp;out_list, bool includeCompleted=false) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8a3ede3222b2b2a8ef91d6a1bad4d9c7"></a><!-- doxytag: member="CDownloadQueue::GetDownloadingFileCount" ref="a8a3ede3222b2b2a8ef91d6a1bad4d9c7" args="() const " -->
uint16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a8a3ede3222b2b2a8ef91d6a1bad4d9c7">GetDownloadingFileCount</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a852e350315ba3dbb7084583337cef1ec"></a><!-- doxytag: member="CDownloadQueue::GetPausedFileCount" ref="a852e350315ba3dbb7084583337cef1ec" args="() const " -->
uint16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a852e350315ba3dbb7084583337cef1ec">GetPausedFileCount</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa307bb211a7bc6874c5b5302dc4a6443"></a><!-- doxytag: member="CDownloadQueue::OnHostnameResolved" ref="aa307bb211a7bc6874c5b5302dc4a6443" args="(uint32 ip)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#aa307bb211a7bc6874c5b5302dc4a6443">OnHostnameResolved</a> (uint32 ip)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5e97c6ab258cf32577d23813f1b55a05"></a><!-- doxytag: member="CDownloadQueue::AddLink" ref="a5e97c6ab258cf32577d23813f1b55a05" args="(const wxString &amp;link, uint8 category=0)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a5e97c6ab258cf32577d23813f1b55a05">AddLink</a> (const wxString &amp;link, uint8 category=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a47b40e92db60a570f05107df4561926f"></a><!-- doxytag: member="CDownloadQueue::AddED2KLink" ref="a47b40e92db60a570f05107df4561926f" args="(const wxString &amp;link, uint8 category=0)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>AddED2KLink</b> (const wxString &amp;link, uint8 category=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6fa618f5be7a1417fb6a7b5c30dab0af"></a><!-- doxytag: member="CDownloadQueue::AddED2KLink" ref="a6fa618f5be7a1417fb6a7b5c30dab0af" args="(const CED2KLink *link, uint8 category=0)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>AddED2KLink</b> (const <a class="el" href="classCED2KLink.html">CED2KLink</a> *link, uint8 category=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa5b9ec1336befdb50af2276a211ba3bc"></a><!-- doxytag: member="CDownloadQueue::AddED2KLink" ref="aa5b9ec1336befdb50af2276a211ba3bc" args="(const CED2KFileLink *link, uint8 category=0)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>AddED2KLink</b> (const <a class="el" href="classCED2KFileLink.html">CED2KFileLink</a> *link, uint8 category=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac96e29b620024601bd50ad8848585fc1"></a><!-- doxytag: member="CDownloadQueue::AddED2KLink" ref="ac96e29b620024601bd50ad8848585fc1" args="(const CED2KServerLink *link)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>AddED2KLink</b> (const <a class="el" href="classCED2KServerLink.html">CED2KServerLink</a> *link)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5e201512f91fa4b85dafad118dda3dee"></a><!-- doxytag: member="CDownloadQueue::AddED2KLink" ref="a5e201512f91fa4b85dafad118dda3dee" args="(const CED2KServerListLink *link)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>AddED2KLink</b> (const <a class="el" href="classCED2KServerListLink.html">CED2KServerListLink</a> *link)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a384df23ba8e9c428f1018b057057ed"></a><!-- doxytag: member="CDownloadQueue::GetUDPServer" ref="a0a384df23ba8e9c428f1018b057057ed" args="() const " -->
<a class="el" href="classCServer.html">CServer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a0a384df23ba8e9c428f1018b057057ed">GetUDPServer</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab83f2fd149fd24af359cb46976bedb64"></a><!-- doxytag: member="CDownloadQueue::SetUDPServer" ref="ab83f2fd149fd24af359cb46976bedb64" args="(CServer *server)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#ab83f2fd149fd24af359cb46976bedb64">SetUDPServer</a> (<a class="el" href="classCServer.html">CServer</a> *server)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8fdebf5825fc616ba8f937e0f634b4ad"></a><!-- doxytag: member="CDownloadQueue::StopUDPRequests" ref="a8fdebf5825fc616ba8f937e0f634b4ad" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a8fdebf5825fc616ba8f937e0f634b4ad">StopUDPRequests</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a418f5a92095e039bf3d308b76c037472"></a><!-- doxytag: member="CDownloadQueue::KademliaSearchFile" ref="a418f5a92095e039bf3d308b76c037472" args="(uint32_t searchID, const Kademlia::CUInt128 *pcontactID, const Kademlia::CUInt128 *pkadID, uint8_t type, uint32_t ip, uint16_t tcp, uint16_t udp, uint32_t buddyip, uint16_t buddyport, uint8_t byCryptOptions)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a418f5a92095e039bf3d308b76c037472">KademliaSearchFile</a> (uint32_t searchID, const <a class="el" href="classKademlia_1_1CUInt128.html">Kademlia::CUInt128</a> *pcontactID, const <a class="el" href="classKademlia_1_1CUInt128.html">Kademlia::CUInt128</a> *pkadID, uint8_t type, uint32_t ip, uint16_t tcp, uint16_t udp, uint32_t buddyip, uint16_t buddyport, uint8_t byCryptOptions)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9ae57a959c3a3612ebab19a3b8f025ef"></a><!-- doxytag: member="CDownloadQueue::GetFileByKadFileSearchID" ref="a9ae57a959c3a3612ebab19a3b8f025ef" args="(uint32 id) const " -->
<a class="el" href="classCPartFile.html">CPartFile</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetFileByKadFileSearchID</b> (uint32 id) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af0efcc4e72b91563a8b853e4782495a2"></a><!-- doxytag: member="CDownloadQueue::DoKademliaFileRequest" ref="af0efcc4e72b91563a8b853e4782495a2" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>DoKademliaFileRequest</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2c51372e735cc87f22fd37c9ae176d20"></a><!-- doxytag: member="CDownloadQueue::SetLastKademliaFileRequest" ref="a2c51372e735cc87f22fd37c9ae176d20" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>SetLastKademliaFileRequest</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aad21042258a3215d0e9c377338cd199d"></a><!-- doxytag: member="CDownloadQueue::GetRareFileThreshold" ref="aad21042258a3215d0e9c377338cd199d" args="() const " -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetRareFileThreshold</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af34fbf31ae55da0f3bd89d4cb1b384c9"></a><!-- doxytag: member="CDownloadQueue::GetCommonFileThreshold" ref="af34fbf31ae55da0f3bd89d4cb1b384c9" args="() const " -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetCommonFileThreshold</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1abb30d2257f28ecc1b408d60d723faa"></a><!-- doxytag: member="CDownloadQueue::ClearCompleted" ref="a1abb30d2257f28ecc1b408d60d723faa" args="(const ListOfUInts32 &amp;ecids)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a1abb30d2257f28ecc1b408d60d723faa">ClearCompleted</a> (const ListOfUInts32 &amp;ecids)</td></tr>
<tr><td colspan="2"><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab1e133d165eebf05dbac45723d55d645"></a><!-- doxytag: member="CDownloadQueue::FileQueue" ref="ab1e133d165eebf05dbac45723d55d645" args="" -->
typedef std::deque&lt; <a class="el" href="classCPartFile.html">CPartFile</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>FileQueue</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f4e19d9b060b6d0b9a7fb271243d1ce"></a><!-- doxytag: member="CDownloadQueue::FileList" ref="a8f4e19d9b060b6d0b9a7fb271243d1ce" args="" -->
typedef std::list&lt; <a class="el" href="classCPartFile.html">CPartFile</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>FileList</b></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a72c94d8e90868ec08d83a79c00aa0ab9"></a><!-- doxytag: member="CDownloadQueue::ObserverAdded" ref="a72c94d8e90868ec08d83a79c00aa0ab9" args="(ObserverType *o)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a72c94d8e90868ec08d83a79c00aa0ab9">ObserverAdded</a> (<a class="el" href="classCObserver.html">ObserverType</a> *o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d77d536e249056f22e38dca197af8a1"></a><!-- doxytag: member="CDownloadQueue::DoSortByPriority" ref="a2d77d536e249056f22e38dca197af8a1" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a2d77d536e249056f22e38dca197af8a1">DoSortByPriority</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a0c0544c0709d17e5fa565d0442fa5656">CheckDiskspace</a> (const <a class="el" href="classCPath.html">CPath</a> &amp;path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a432abdd07e9e1cd352775426f8a8b5f4"></a><!-- doxytag: member="CDownloadQueue::DoStopUDPRequests" ref="a432abdd07e9e1cd352775426f8a8b5f4" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a432abdd07e9e1cd352775426f8a8b5f4">DoStopUDPRequests</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afb648acfb20fe680d764db0c9fec61a1"></a><!-- doxytag: member="CDownloadQueue::ProcessLocalRequests" ref="afb648acfb20fe680d764db0c9fec61a1" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>ProcessLocalRequests</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a539923aac2e697f2e00968d1debf94d4"></a><!-- doxytag: member="CDownloadQueue::SendNextUDPPacket" ref="a539923aac2e697f2e00968d1debf94d4" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>SendNextUDPPacket</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4b02fc8d81229a932be9c414869012f9"></a><!-- doxytag: member="CDownloadQueue::GetMaxFilesPerUDPServerPacket" ref="a4b02fc8d81229a932be9c414869012f9" args="() const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>GetMaxFilesPerUDPServerPacket</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9e13a0d5550d00ec719c49b6b69758ee"></a><!-- doxytag: member="CDownloadQueue::SendGlobGetSourcesUDPPacket" ref="a9e13a0d5550d00ec719c49b6b69758ee" args="(CMemFile &amp;data)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>SendGlobGetSourcesUDPPacket</b> (<a class="el" href="classCMemFile.html">CMemFile</a> &amp;data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a25b2a3d00bb3a1bf5f528d198c76b740"></a><!-- doxytag: member="CDownloadQueue::AddToResolve" ref="a25b2a3d00bb3a1bf5f528d198c76b740" args="(const CMD4Hash &amp;fileid, const wxString &amp;pszHostname, uint16 port, const wxString &amp;hash, uint8 cryptoptions)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>AddToResolve</b> (const <a class="el" href="classCMD4Hash.html">CMD4Hash</a> &amp;fileid, const wxString &amp;pszHostname, uint16 port, const wxString &amp;hash, uint8 cryptoptions)</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a015ae83ec6c131dbaca7c4486573a453"></a><!-- doxytag: member="CDownloadQueue::m_mutex" ref="a015ae83ec6c131dbaca7c4486573a453" args="" -->
wxMutex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a015ae83ec6c131dbaca7c4486573a453">m_mutex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a40cc6b02b8d3a4db76a3d3d70eb562"></a><!-- doxytag: member="CDownloadQueue::m_datarate" ref="a1a40cc6b02b8d3a4db76a3d3d70eb562" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_datarate</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a73ed21c3f7d081a777042edde51205ad"></a><!-- doxytag: member="CDownloadQueue::m_lastDiskCheck" ref="a73ed21c3f7d081a777042edde51205ad" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_lastDiskCheck</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a125e501960c589252a5ddd8a7a41080e"></a><!-- doxytag: member="CDownloadQueue::m_lastudpsearchtime" ref="a125e501960c589252a5ddd8a7a41080e" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_lastudpsearchtime</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2663496ab39445e0b060e1df97e030b0"></a><!-- doxytag: member="CDownloadQueue::m_lastsorttime" ref="a2663496ab39445e0b060e1df97e030b0" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_lastsorttime</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a43f99ae867bff68b82399e27299d5839"></a><!-- doxytag: member="CDownloadQueue::m_lastudpstattime" ref="a43f99ae867bff68b82399e27299d5839" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_lastudpstattime</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0787f5ecc74f6a1d647c0698f7422e93"></a><!-- doxytag: member="CDownloadQueue::m_nLastED2KLinkCheck" ref="a0787f5ecc74f6a1d647c0698f7422e93" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_nLastED2KLinkCheck</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab98c054fbe31b02e2fe716d999bf787f"></a><!-- doxytag: member="CDownloadQueue::m_cRequestsSentToServer" ref="ab98c054fbe31b02e2fe716d999bf787f" args="" -->
uint8&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_cRequestsSentToServer</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d7086422ead3e8922be314fb5a6f0a0"></a><!-- doxytag: member="CDownloadQueue::m_dwNextTCPSrcReq" ref="a2d7086422ead3e8922be314fb5a6f0a0" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_dwNextTCPSrcReq</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48a0c5e8ea21764725209595c63680cc"></a><!-- doxytag: member="CDownloadQueue::m_udcounter" ref="a48a0c5e8ea21764725209595c63680cc" args="" -->
uint8&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_udcounter</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a74b1577d1cd010a64b62381814c1b362"></a><!-- doxytag: member="CDownloadQueue::m_udpserver" ref="a74b1577d1cd010a64b62381814c1b362" args="" -->
<a class="el" href="classCServer.html">CServer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_udpserver</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5ac90959ff4cca4bf41a12429fb59893"></a><!-- doxytag: member="CDownloadQueue::m_toresolve" ref="a5ac90959ff4cca4bf41a12429fb59893" args="" -->
std::deque&lt; <a class="el" href="structCDownloadQueue_1_1Hostname__Entry.html">Hostname_Entry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_toresolve</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af2c472b222f7d8214d4979f4d2dc7d8e"></a><!-- doxytag: member="CDownloadQueue::m_filelist" ref="af2c472b222f7d8214d4979f4d2dc7d8e" args="" -->
FileQueue&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_filelist</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92718bed8243fa3ed352f5c4dcc37546"></a><!-- doxytag: member="CDownloadQueue::m_localServerReqQueue" ref="a92718bed8243fa3ed352f5c4dcc37546" args="" -->
FileList&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_localServerReqQueue</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9b9d788af3a1e621fa7e963c5088cbe2"></a><!-- doxytag: member="CDownloadQueue::m_completedDownloads" ref="a9b9d788af3a1e621fa7e963c5088cbe2" args="" -->
FileList&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a9b9d788af3a1e621fa7e963c5088cbe2">m_completedDownloads</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae8944a7069097ea35e5b3bceca14cbda"></a><!-- doxytag: member="CDownloadQueue::m_queueServers" ref="ae8944a7069097ea35e5b3bceca14cbda" args="" -->
<a class="el" href="classCQueueObserver.html">CQueueObserver</a>&lt; <a class="el" href="classCServer.html">CServer</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#ae8944a7069097ea35e5b3bceca14cbda">m_queueServers</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae0d15dd85e2079d760a010249bca16e5"></a><!-- doxytag: member="CDownloadQueue::m_queueFiles" ref="ae0d15dd85e2079d760a010249bca16e5" args="" -->
<a class="el" href="classCQueueObserver.html">CQueueObserver</a>&lt; <a class="el" href="classCPartFile.html">CPartFile</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#ae0d15dd85e2079d760a010249bca16e5">m_queueFiles</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2c628c6759f88d571401f8223657d10b"></a><!-- doxytag: member="CDownloadQueue::lastkademliafilerequest" ref="a2c628c6759f88d571401f8223657d10b" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><b>lastkademliafilerequest</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0bcf63482507f7f1bb479a9a5a951f33"></a><!-- doxytag: member="CDownloadQueue::m_rareFileThreshold" ref="a0bcf63482507f7f1bb479a9a5a951f33" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a0bcf63482507f7f1bb479a9a5a951f33">m_rareFileThreshold</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a29e4fbf1c95eede560b4b9dede801769"></a><!-- doxytag: member="CDownloadQueue::m_commonFileThreshold" ref="a29e4fbf1c95eede560b4b9dede801769" args="" -->
uint32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDownloadQueue.html#a29e4fbf1c95eede560b4b9dede801769">m_commonFileThreshold</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The download queue houses all active downloads. </p>
<p>This class should be thread-safe. </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab6cec8c090865ec4e431fb51ff7d87fc"></a><!-- doxytag: member="CDownloadQueue::AddDownload" ref="ab6cec8c090865ec4e431fb51ff7d87fc" args="(CPartFile *newfile, bool paused, uint8 category)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDownloadQueue::AddDownload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPartFile.html">CPartFile</a> *&nbsp;</td>
          <td class="paramname"> <em>newfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>paused</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8&nbsp;</td>
          <td class="paramname"> <em>category</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds an existing partfile to the queue. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>newfile</em>&nbsp;</td><td>The file to add. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>paused</em>&nbsp;</td><td>If the file should be stopped when added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>category</em>&nbsp;</td><td>The category to assign to the file. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="DownloadQueue_8cpp_source.html#l01001">DoSortByPriority()</a>, <a class="el" href="DownloadQueue_8cpp_source.html#l00177">GetFileCount()</a>, <a class="el" href="ObservableQueue_8h_source.html#l00066">CQueueEvent&lt; ValueType &gt;::INSERTED</a>, <a class="el" href="DownloadQueue_8cpp_source.html#l00378">IsFileExisting()</a>, <a class="el" href="DownloadQueue_8h_source.html#l00350">m_mutex</a>, and <a class="el" href="classCObservable.html#a15f6876f44512d3e2413da40807e812b">CObservable&lt; CQueueEvent&lt; CPartFile * &gt; &gt;::NotifyObservers()</a>.</p>

<p>Referenced by <a class="el" href="DownloadQueue_8cpp_source.html#l00233">AddSearchToDownload()</a>.</p>

</div>
</div>
<a class="anchor" id="af31a136ab20fdf1b4a16009f8b6283f6"></a><!-- doxytag: member="CDownloadQueue::AddSearchToDownload" ref="af31a136ab20fdf1b4a16009f8b6283f6" args="(CSearchFile *toadd, uint8 category)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDownloadQueue::AddSearchToDownload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCSearchFile.html">CSearchFile</a> *&nbsp;</td>
          <td class="paramname"> <em>toadd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8&nbsp;</td>
          <td class="paramname"> <em>category</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts a new download based on the specified search-result. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>toadd</em>&nbsp;</td><td>The search-result to add. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>category</em>&nbsp;</td><td>The category to assign to the new download.</td></tr>
  </table>
  </dd>
</dl>
<p>The download will only be started if no identical files are either being downloaded or shared currently. </p>

<p>References <a class="el" href="DownloadQueue_8cpp_source.html#l00350">AddDownload()</a>, <a class="el" href="DownloadQueue_8cpp_source.html#l00378">IsFileExisting()</a>, <a class="el" href="MemFile_8h_source.html#l00122">CMemFile::Reset()</a>, and <a class="el" href="SafeFile_8cpp_source.html#l00261">CFileDataIO::WriteUInt8()</a>.</p>

</div>
</div>
<a class="anchor" id="abc3acf6acf68639bf30972616dbfdba0"></a><!-- doxytag: member="CDownloadQueue::CheckAndAddKnownSource" ref="abc3acf6acf68639bf30972616dbfdba0" args="(CPartFile *sender, CUpDownClient *source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDownloadQueue::CheckAndAddKnownSource </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPartFile.html">CPartFile</a> *&nbsp;</td>
          <td class="paramname"> <em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCUpDownClient.html">CUpDownClient</a> *&nbsp;</td>
          <td class="paramname"> <em>source</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function adds already known source to the specified file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sender</em>&nbsp;</td><td>The owner fo the new source. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>source</em>&nbsp;</td><td>The client in question.</td></tr>
  </table>
  </dd>
</dl>
<p>This function acts like CheckAndAddSource, with the exception that no checks are made to see if the client is a duplicate. It is assumed that it is in fact a valid client. </p>

<p>References <a class="el" href="PartFile_8cpp_source.html#l03924">CPartFile::IsDeadSource()</a>.</p>

</div>
</div>
<a class="anchor" id="aec828dff750b3c73b48fd6315f5c91bd"></a><!-- doxytag: member="CDownloadQueue::CheckAndAddSource" ref="aec828dff750b3c73b48fd6315f5c91bd" args="(CPartFile *sender, CUpDownClient *source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDownloadQueue::CheckAndAddSource </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPartFile.html">CPartFile</a> *&nbsp;</td>
          <td class="paramname"> <em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCUpDownClient.html">CUpDownClient</a> *&nbsp;</td>
          <td class="paramname"> <em>source</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a potiential new client to the specified file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sender</em>&nbsp;</td><td>The owner of the new source. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>source</em>&nbsp;</td><td>The client in question, might be deleted!</td></tr>
  </table>
  </dd>
</dl>
<p>This function will check the new client against the already existing clients. The source will then be queued as is appropriate, or deleted if it is duplicate of an existing client. </p>

<p>References <a class="el" href="PartFile_8cpp_source.html#l03924">CPartFile::IsDeadSource()</a>, and <a class="el" href="BaseClient_8cpp_source.html#l00384">CUpDownClient::Safe_Delete()</a>.</p>

<p>Referenced by <a class="el" href="DownloadQueue_8cpp_source.html#l01541">KademliaSearchFile()</a>.</p>

</div>
</div>
<a class="anchor" id="a0c0544c0709d17e5fa565d0442fa5656"></a><!-- doxytag: member="CDownloadQueue::CheckDiskspace" ref="a0c0544c0709d17e5fa565d0442fa5656" args="(const CPath &amp;path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDownloadQueue::CheckDiskspace </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCPath.html">CPath</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks that there is enough free spaces for temp-files at that specified path. </p>

<p>References <a class="el" href="Path_8cpp_source.html#l00658">CPath::GetFreeSpaceAt()</a>, and <a class="el" href="UserEvents_8cpp_source.html#l00144">CUserEvents::ProcessEvent()</a>.</p>

<p>Referenced by <a class="el" href="DownloadQueue_8cpp_source.html#l00111">LoadMetFiles()</a>, and <a class="el" href="DownloadQueue_8cpp_source.html#l00410">Process()</a>.</p>

</div>
</div>
<a class="anchor" id="acb08ffb35ca10a5789a988085ee574c9"></a><!-- doxytag: member="CDownloadQueue::GetDownloadClientByIP_UDP" ref="acb08ffb35ca10a5789a988085ee574c9" args="(uint32 dwIP, uint16 nUDPPort) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCUpDownClient.html">CUpDownClient</a> * CDownloadQueue::GetDownloadClientByIP_UDP </td>
          <td>(</td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>dwIP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&nbsp;</td>
          <td class="paramname"> <em>nUDPPort</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finds the queued client by IP and UDP-port, by looking at file-sources. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dwIP</em>&nbsp;</td><td>The IP-address of the client. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nUDPPort</em>&nbsp;</td><td>The UDP-port of the client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The matching client or NULL if none was found. </dd></dl>

<p>References <a class="el" href="DownloadQueue_8h_source.html#l00350">m_mutex</a>.</p>

</div>
</div>
<a class="anchor" id="a3613b7e4b35a207a2aa7042e34f5c9f4"></a><!-- doxytag: member="CDownloadQueue::GetFileByID" ref="a3613b7e4b35a207a2aa7042e34f5c9f4" args="(const CMD4Hash &amp;filehash) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCPartFile.html">CPartFile</a> * CDownloadQueue::GetFileByID </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCMD4Hash.html">CMD4Hash</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>filehash</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a pointer to the file with the specified hash, or NULL. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filehash</em>&nbsp;</td><td>The hash to search for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The corresponding file or NULL. </dd></dl>

<p>References <a class="el" href="DownloadQueue_8h_source.html#l00391">m_completedDownloads</a>, and <a class="el" href="DownloadQueue_8h_source.html#l00350">m_mutex</a>.</p>

<p>Referenced by <a class="el" href="DownloadQueue_8cpp_source.html#l00378">IsFileExisting()</a>, and <a class="el" href="DownloadQueue_8cpp_source.html#l01343">OnHostnameResolved()</a>.</p>

</div>
</div>
<a class="anchor" id="aab959e5772c45a300f591638db1b93da"></a><!-- doxytag: member="CDownloadQueue::GetFileByIndex" ref="aab959e5772c45a300f591638db1b93da" args="(unsigned int idx) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCPartFile.html">CPartFile</a> * CDownloadQueue::GetFileByIndex </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the file at the specified position in the file-list, or NULL if invalid. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>A</em>&nbsp;</td><td>valid position in the file-list. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A valid pointer or NULL if the index was invalid. </dd></dl>

<p>References <a class="el" href="DownloadQueue_8h_source.html#l00350">m_mutex</a>.</p>

<p>Referenced by <a class="el" href="DownloadQueue_8cpp_source.html#l00225">LoadSourceSeeds()</a>, <a class="el" href="DownloadQueue_8cpp_source.html#l00760">RemoveSource()</a>, <a class="el" href="DownloadQueue_8cpp_source.html#l00217">SaveSourceSeeds()</a>, and <a class="el" href="DownloadQueue_8cpp_source.html#l01151">SetCatPrio()</a>.</p>

</div>
</div>
<a class="anchor" id="a122349774932a2db46ab23e3e134cd4f"></a><!-- doxytag: member="CDownloadQueue::LoadMetFiles" ref="a122349774932a2db46ab23e3e134cd4f" args="(const CPath &amp;path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDownloadQueue::LoadMetFiles </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCPath.html">CPath</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Loads met-files from the specified directory. </p>

<p>References <a class="el" href="DownloadQueue_8cpp_source.html#l01226">CheckDiskspace()</a>, <a class="el" href="DownloadQueue_8cpp_source.html#l01001">DoSortByPriority()</a>, <a class="el" href="DownloadQueue_8cpp_source.html#l00177">GetFileCount()</a>, <a class="el" href="Path_8cpp_source.html#l00427">CPath::GetFullName()</a>, <a class="el" href="Path_8cpp_source.html#l00403">CPath::GetPrintable()</a>, <a class="el" href="ObservableQueue_8h_source.html#l00066">CQueueEvent&lt; ValueType &gt;::INSERTED</a>, <a class="el" href="DownloadQueue_8cpp_source.html#l00378">IsFileExisting()</a>, <a class="el" href="Path_8cpp_source.html#l00347">CPath::IsOk()</a>, <a class="el" href="Path_8cpp_source.html#l00468">CPath::JoinPaths()</a>, <a class="el" href="DownloadQueue_8h_source.html#l00350">m_mutex</a>, and <a class="el" href="classCObservable.html#a15f6876f44512d3e2413da40807e812b">CObservable&lt; CQueueEvent&lt; CPartFile * &gt; &gt;::NotifyObservers()</a>.</p>

</div>
</div>
<a class="anchor" id="a70203682ccc5df6a45c55c1d9c809cc2"></a><!-- doxytag: member="CDownloadQueue::RemoveFile" ref="a70203682ccc5df6a45c55c1d9c809cc2" args="(CPartFile *toremove, bool keepAsCompleted=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDownloadQueue::RemoveFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPartFile.html">CPartFile</a> *&nbsp;</td>
          <td class="paramname"> <em>toremove</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>keepAsCompleted</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes the specified file from the queue. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>toremove</em>&nbsp;</td><td>A pointer to the file object to be removed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>keepAsCompleted</em>&nbsp;</td><td>If true add the removed file to the list of completed files. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="DownloadQueue_8h_source.html#l00391">m_completedDownloads</a>, <a class="el" href="DownloadQueue_8h_source.html#l00350">m_mutex</a>, <a class="el" href="classCObservable.html#a15f6876f44512d3e2413da40807e812b">CObservable&lt; CQueueEvent&lt; CPartFile * &gt; &gt;::NotifyObservers()</a>, <a class="el" href="ObservableQueue_8h_source.html#l00068">CQueueEvent&lt; ValueType &gt;::REMOVED</a>, and <a class="el" href="DownloadQueue_8cpp_source.html#l01021">RemoveLocalServerRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="a4faa385ebab56cfadb5273365998b323"></a><!-- doxytag: member="CDownloadQueue::RemoveSource" ref="a4faa385ebab56cfadb5273365998b323" args="(CUpDownClient *toremove, bool updatewindow=true, bool bDoStatsUpdate=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CDownloadQueue::RemoveSource </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCUpDownClient.html">CUpDownClient</a> *&nbsp;</td>
          <td class="paramname"> <em>toremove</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>updatewindow</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>bDoStatsUpdate</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes the specified client completly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>toremove</em>&nbsp;</td><td>The client to be removed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>updatewindow</em>&nbsp;</td><td>NOT USED! </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bDoStatsUdpate</em>&nbsp;</td><td>Specifies if the affected files should update their statistics. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if the sources was found and removed.</dd></dl>
<p>This function will remove the specified source from both normal source lists, A4AF lists and the downloadqueue-widget. The requestfile of the source is also reset. </p>

<p>References <a class="el" href="DownloadQueue_8cpp_source.html#l00567">GetFileByIndex()</a>, and <a class="el" href="DownloadQueue_8cpp_source.html#l00177">GetFileCount()</a>.</p>

</div>
</div>
<a class="anchor" id="a456551034265541eea0ceece9f526df4"></a><!-- doxytag: member="CDownloadQueue::StartNextFile" ref="a456551034265541eea0ceece9f526df4" args="(CPartFile *oldfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDownloadQueue::StartNextFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPartFile.html">CPartFile</a> *&nbsp;</td>
          <td class="paramname"> <em>oldfile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts the next paused file on the queue, going after priority. </p>
<p>Also checks for categories if enabled on preferences. </p>

<p>References <a class="el" href="DownloadQueue_8cpp_source.html#l00310">SFindBestPF::m_category</a>, <a class="el" href="DownloadQueue_8h_source.html#l00350">m_mutex</a>, and <a class="el" href="DownloadQueue_8cpp_source.html#l00312">SFindBestPF::m_result</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="DownloadQueue_8h_source.html">DownloadQueue.h</a></li>
<li>src/DownloadQueue.cpp</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 4 Dec 2014 for aMule by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
